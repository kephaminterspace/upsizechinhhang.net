if (self.CavalryLogger) { CavalryLogger.start_js(["Cd2uZ"]); }

__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports={NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1};}),null);
__d("MercuryActionStatus",[],(function a(b,c,d,e,f,g){f.exports={UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10};}),null);
__d("MercuryActionType",[],(function a(b,c,d,e,f,g){f.exports={LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data"};}),null);
__d("MercuryAPIArgsSource",[],(function a(b,c,d,e,f,g){f.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"};}),null);
__d("MercuryAttachmentContentType",[],(function a(b,c,d,e,f,g){f.exports={PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"};}),null);
__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports={ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"};}),null);
__d("MercuryAudioType",[],(function a(b,c,d,e,f,g){f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"};}),null);
__d("MercuryErrorType",[],(function a(b,c,d,e,f,g){f.exports={SERVER:1,TRANSPORT:2,TIMEOUT:3};}),null);
__d("MercuryGlobalActionType",[],(function a(b,c,d,e,f,g){f.exports={MARK_ALL_READ:"mga-type:mark-all-read"};}),null);
__d("MercuryLogMessageType",[],(function a(b,c,d,e,f,g){f.exports={SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"};}),null);
__d("MercuryPayloadSource",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN:"unknown",CLIENT_CHANNEL_MESSAGE:"client_channel_message",CLIENT_SEND_MESSAGE:"client_send_message",CLIENT_CHANGE_ARCHIVED_STATUS:"client_change-archived_status",CLIENT_CHANGE_FOLDER:"client_change_folder",CLIENT_CHANGE_MUTE_SETTINGS:"client_change_mute_settings",CLIENT_CHANGE_READ_STATUS:"client_change_read_status",CLIENT_CHANGE_CUSTOM_LIKE:"client_change_custom_like",CLIENT_MARK_THREAD_SEEN:"client_mark_thread_seen",CLIENT_ADD_PARTICIPANTS:"client_add_participants",CLIENT_FETCH_PARTICIPANTS:"client_fetch_participants",CLIENT_DELETE_MESSAGES:"client_delete_messages",CLIENT_DELETE_THREAD:"client_delete_thread",CLIENT_UPDATE_SNIPPET:"client_update_snippet",CLIENT_HANDLE_ERROR:"client_handle_error",CLIENT_CHANGE_FLAG:"client_change_flag",CLIENT_MOVE_PENDING_TO_INBOX:"client_move_pending_to_inbox",CLIENT_CREATE_PAGE_ADMIN_NOTE:"client_create_page_admin_note",CLIENT_UNWRAP_MESSAGE:"client_unwrap_message",SERVER_INITIAL_DATA:"server_initial_data",SERVER_SEND_MESSAGE:"server_send_message",SERVER_CHANGE_ARCHIVED_STATUS:"server_change_archived_status",SERVER_CHANGE_READ_STATUS:"server_change_read_status",SERVER_MARK_FOLDER_READ:"server_mark_folder_read",SERVER_MARK_SEEN:"server_mark_seen",SERVER_FETCH_PARTICIPANTS:"server_fetch_participants",SERVER_FETCH_THREAD_INFO:"server_fetch_thread_info",SERVER_FETCH_THREADLIST_INFO:"server_fetch_threadlist_info",SERVER_STANDALONE_NOTIFICATIONS:"server_standalone_notifications",SERVER_THREAD_SYNC:"server_thread_sync",SERVER_TAB_PRESENCE:"server_tab_presence",SERVER_UNREAD_THREADS:"server_unread_threads",SERVER_UNSEEN_THREADS:"server_unseen_threads",SERVER_SEARCH:"server_search",SERVER_CHANGE_FLAG:"server_change_flag",SERVER_INVALIDATE_THREAD_STATE:"server_invalidate_thread_state",SERVER_INVALIDATE_GLOBAL_STATE:"server_invalidate_global_state"};}),null);
__d("MercurySourceType",[],(function a(b,c,d,e,f,g){f.exports={CHAT_ORCA:"source:chat:orca",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation"};}),null);
__d("MercuryTypeaheadConstants",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:4,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_WM_MAX:19,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",VALID_EMAIL:"^([A-Z0-9._\u0025+-]+\u0040((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*)|([A-Z0-9._\u0025+-]+[A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*))\u0040(?:facebook\\.com))$"};}),null);
__d("MessagingGenericAdminTextType",[],(function a(b,c,d,e,f,g){f.exports={MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",PHONE_CONTACT_UPLOAD:"phone_contact_upload",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request"};}),null);
__d("MessengerThreadCannotReplyReason",[],(function a(b,c,d,e,f,g){f.exports={BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"};}),null);
__d("MessengerView",[],(function a(b,c,d,e,f,g){f.exports={DETAIL:{COMPOSE:"detail\/compose",THREAD:"detail\/thread"},MASTER:{GROUPS:"master\/groups",PEOPLE:"master\/people",RECENT:"master\/recent",SUPPORT:"master\/support",SEARCH:"master\/search"}};}),null);
__d("PageMessageEnumTag",[],(function a(b,c,d,e,f,g){f.exports={FLAG:"flag",IMPORTANT:"important",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing"};}),null);
__d("PhotoResizeModeConst",[],(function a(b,c,d,e,f,g){f.exports={CONTAIN:"s",COVER:"p"};}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment"};}),null);
__d('NubController',['ArbiterMixin','Dock'],(function a(b,c,d,e,f,g){function h(){}Object.assign(h.prototype,c('ArbiterMixin'),{init:function i(j){this.el=j;c('Dock').registerNubController(j,this);return this;},buttonContentChanged:function i(){this.inform('nub/button/content-changed');},flyoutContentChanged:function i(){this.inform('nub/flyout/content-changed');},hide:function i(){c('Dock').hide(this.el);},show:function i(){c('Dock').show(this.el);}});f.exports=h;}),null);
__d('EventReminderConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={GOING:'GOING',DECLINED:'DECLINED',INVITED:'INVITED'},i={NO_ERROR:'NO_ERROR',PAST_TIME:'PAST_TIME',AFTER_ONE_YEAR:'AFTER_ONE_YEAR'};f.exports={GuestStates:h,TimeErrorType:i};}),null);
__d('MercuryMessageClientState',[],(function a(b,c,d,e,f,g){var h={DO_NOT_SEND_TO_SERVER:'do_not_send_to_server',SEND_TO_SERVER:'send_to_server'};f.exports=h;}),null);
__d('ChatBehavior',['Arbiter','AvailableList','AvailableListConstants','ChatNotificationConstants'],(function a(b,c,d,e,f,g){var h=false,i=c('AvailableList').getWebChatNotification&&c('AvailableList').getWebChatNotification(),j=h,k=true,l=Object.assign(new (c('Arbiter'))(),{ON_CHANGED:'changed',notifiesUserMessages:function n(){return i!==c('ChatNotificationConstants').NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function n(){return j;},showsTabUnreadUI:function n(){return k;}});function m(){l.inform(l.ON_CHANGED);}c('AvailableList').subscribe&&c('AvailableList').subscribe(c('AvailableListConstants').ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c('AvailableList').getWebChatNotification();i=o;if(n!=o)m();});c('Arbiter').subscribe('chat/set_does_page_occlude_tabs',function(n,o){j=!!o;m();});c('Arbiter').subscribe('chat/set_show_tab_unread_ui',function(n,o){k=!!o;m();});f.exports=l;}),null);
__d('ImageSourceType',[],(function a(b,c,d,e,f,g){var h={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};f.exports=h;}),null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],(function a(b,c,d,e,f,g){function h(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}h.prototype.setFBID=function(l){'use strict';this._request.fbid=l;return this;};h.prototype.setType=function(l){'use strict';if(!c('arrayContains')([c('ImageSourceType').PROFILE_PICTURE,c('ImageSourceType').IMAGE],l))throw new TypeError('ImageSourceRequest.setType: invalid type '+l);this._request.type=l;return this;};h.prototype.setDimensions=function(l,m){'use strict';this._request.width=l;this._request.height=m;return this;};h.prototype.setResizeMode=function(l){'use strict';if(!c('arrayContains')([c('PhotoResizeModeConst').COVER,c('PhotoResizeModeConst').CONTAIN],l))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+l);this._request.resize_mode=l;return this;};h.prototype.setCallback=function(l){'use strict';this._callback=l;return this;};h.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var l=j(),m=k(this._request);l.executeOrEnqueue(m,this._callback);if(l.getUnavailableResourcesFromRequest(m).length===1){c('MercuryServerDispatcher').trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var i=null;function j(){if(i)return i;var l=new (c('KeyedCallbackManager'))();i=l;c('MercuryServerDispatcher').registerEndpoints({'/ajax/image_source.php':{request_user_id:c('CurrentUser').getID(),mode:c('MercuryServerDispatcher').BATCH_DEFERRED_MULTI,batch_function:function m(n,o){var p;(p=n.requests).push.apply(p,o.requests);return n;},handler:function m(n,o){var p=o.getData().requests;for(var q=0;q<p.length;++q)l.setResource(k(p[q]),n[q]);}}});return l;}function k(l){return [l.fbid,l.type,l.width,l.height,l.resize_mode].join('|');}f.exports=h;}),null);
__d('MercuryAssert',['MercuryIDs'],(function a(b,c,d,e,f,g){f.exports={isParticipantID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_participant_id '+i);},allParticipantIDs:function h(i){i.forEach(this.isParticipantID);},isUserParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='fbid')throw new Error('bad_user_id '+i);},isEmailParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='email')throw new Error('bad_email_id '+i);},allThreadID:function h(i){i.forEach(this.isThreadID);},isThreadID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_thread_id '+i);}};}),null);
__d('MercurySingletonProvider',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=i;}h.prototype.getForFBID=function(i){if(!this.$MercurySingletonProvider1[i])this.$MercurySingletonProvider1[i]=new this.$MercurySingletonProvider2(i);return this.$MercurySingletonProvider1[i];};h.prototype.get=function(){return this.getForFBID(c('CurrentUser').getID());};h.mock=function(i){throw new Error('MercurySingletonProvider.mock() must only be used in tests.');};f.exports=h;}),null);
__d('MercuryThreadInformer',['ArbiterMixin','LogHistory','MercuryAssert','MercurySingletonProvider','mapObject','mixin'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('LogHistory').getInstance('mercury_informer');h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;k.get=function(){return l.get();};k.getForFBID=function(m){return l.getForFBID(m);};function k(m){i.constructor.call(this);this.$MercuryThreadInformer1=m;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0;}k.prototype.updatedThread=function(m){this.$MercuryThreadInformer3[m]=true;this.$MercuryThreadInformer13();};k.prototype.invalidatedThread=function(m){this.$MercuryThreadInformer4[m]=true;this.$MercuryThreadInformer13();};k.prototype.deletedThread=function(m){this.$MercuryThreadInformer2[m]=true;this.$MercuryThreadInformer13();};k.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13();};k.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13();};k.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13();};k.prototype.changedThreadReadState=function(m,n,o){if(!this.$MercuryThreadInformer5[m]||this.$MercuryThreadInformer5[m].timestamp<o)this.$MercuryThreadInformer5[m]={mark_as_read:n,timestamp:o};this.$MercuryThreadInformer13();};k.prototype.receivedMessage=function(m){c('MercuryAssert').isThreadID(m.thread_id);var n=m.thread_id;if(!this.$MercuryThreadInformer9[n])this.$MercuryThreadInformer9[n]=[];this.$MercuryThreadInformer9[n].push(m);this.updatedThread(n);};k.prototype.reorderedMessages=function(m,n){this.$MercuryThreadInformer10[m]={source:n};this.$MercuryThreadInformer13();};k.prototype.updatedMessage=function(m,n,o){if(!this.$MercuryThreadInformer11[m])this.$MercuryThreadInformer11[m]={};this.$MercuryThreadInformer11[m][n]={source:o};this.updatedThread(m);};k.prototype.synchronizeInforms=function(m){this.$MercuryThreadInformer12++;try{m();}catch(n){throw n;}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13();}};k.prototype.listen=function(m,n){return this.subscribe('threads-updated',function(o,p){if(p[m])n(m);});};k.prototype.$MercuryThreadInformer13=function(){if(!this.$MercuryThreadInformer12){var m=this.$MercuryThreadInformer2,n=this.$MercuryThreadInformer3,o=this.$MercuryThreadInformer4,p=this.$MercuryThreadInformer5,q=this.$MercuryThreadInformer6,r=this.$MercuryThreadInformer7,s=this.$MercuryThreadInformer8,t=this.$MercuryThreadInformer9,u=this.$MercuryThreadInformer10,v=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var w=Object.keys(n);if(w.length||q)this.inform('threadlist-updated',w);if(w.length)this.$MercuryThreadInformer14('threads-updated',n);for(var x in o){this.$MercuryThreadInformer14('thread-invalidated',o);break;}for(var x in p){this.$MercuryThreadInformer14('thread-read-changed',p);break;}for(x in m){this.$MercuryThreadInformer14('threads-deleted',m);break;}if(r)this.$MercuryThreadInformer14('unseen-updated',null);if(s)this.$MercuryThreadInformer14('unread-updated',null);for(x in t){this.$MercuryThreadInformer14('messages-received',t);break;}for(x in u){this.$MercuryThreadInformer14('messages-reordered',u);break;}for(x in v){this.$MercuryThreadInformer14('messages-updated',v);break;}}};k.prototype.$MercuryThreadInformer14=function(m,n){j.debug(m,m==='threads-updated'?JSON.stringify(n):'{}');this.inform(m,n);};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;}),null);
__d('MercuryDispatcher',['invariant','ArbiterMixin','LogHistory','MercuryActionType','MercuryPayloadSource','MercurySingletonProvider','MercuryThreadInformer','isEmpty','mixin'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('LogHistory').getInstance('mercury_dispatcher');i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};function l(n){j.constructor.call(this);this.$MercuryDispatcher1=n;}l.prototype.handleUpdate=function(n){this.$MercuryDispatcher2(n);!!n.from_client!==!!n.preprocessed||h(0);delete n.preprocessed;if(!c('isEmpty')(n))c('MercuryThreadInformer').getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){if(n.payload_source===c('MercuryPayloadSource').SERVER_INVALIDATE_GLOBAL_STATE)this.inform('invalidate-global-state',{});if(n.payload_source===c('MercuryPayloadSource').SERVER_INVALIDATE_THREAD_STATE){var o=n.threads&&n.threads.length>0&&n.threads[0]&&n.threads[0].thread_id;if(o)this.inform('invalidate-thread-state',o);}this.inform('update-thread-ids',n.newlyAddedClientIDs||{});this.inform('update-participants',n);this.inform('update-threads',n);this.inform('update-unread',n);this.inform('update-threadlist',n);this.inform('update-messages',n);this.inform('update-unseen',n);this.inform('update-typing-state',n);this.inform('update-delivery',n);this.inform('update-roger',n.roger);this.inform('update-blocked-users',n);this.inform('fanta-payload',n);this.inform('model-update-completed',null);}.bind(this));};l.prototype.$MercuryDispatcher2=function(n){var o=n.payload_source;if(o===c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS||o===c('MercuryPayloadSource').CLIENT_MARK_THREAD_SEEN)return;var p={from_client:n.from_client,messages:null};if(n.actions){var q=n.actions.filter(function(r){return (r.action_type===c('MercuryActionType').USER_GENERATED_MESSAGE||r.action_type===c('MercuryActionType').LOG_MESSAGE);}).map(function(r){return {action_type:r.action_type,other_user_fbid:r.other_user_fbid,thread_fbid:r.thread_fbid,message_id:r.message_id};});if(q.length)p.messages=q;}k.debug('update:'+o,JSON.stringify(p));};var m=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('EmojiLikeConstants',['EmojiStaticConfig'],(function a(b,c,d,e,f,g){'use strict';var h=c('EmojiStaticConfig').sizeMap,i={XSMALL:'xsmall',SMALL:'small',MEDIUM:'medium',LARGE:'large'},j={dp16:'xsmall',dp32:'small',dp64:'medium',db64:'medium',dp128:'large'},k={PICKER:'picker',HOT_LIKE:'hot_like'},l=[983040],m='hot_emoji_source',n='hot_emoji_size',o='emoji_like',p='\uD83D\uDC4D',q=[128077];f.exports={FB_THUMBS_UP_EMOJI:l,size:i,sizeMap:h,sizeMapTransfer:j,source:k,SOURCE_TAG_PREFIX:m,TAG_PREFIX_NEW:n,TAG_PREFIX_OLD:o,THUMBS_UP_EMOJI:p,THUMBS_UP_EMOJI_CODES:q};}),null);
__d('MercuryTagHelper',[],(function a(b,c,d,e,f,g){'use strict';var h={get:function i(j,k){var l=j.find(function(m){return m.startsWith(k);});return l&&l.substr(l.indexOf(':')+1);}};f.exports=h;}),null);
__d('EmojiLikeUtils',['EmojiLikeConstants','EmoticonEmojiList','MercuryTagHelper'],(function a(b,c,d,e,f,g){'use strict';function h(n,o){if(!n.tags){n.tags=[i(o)];}else n.tags.push(i(o));return n;}function i(n){var o=c('EmojiLikeConstants').TAG_PREFIX_NEW;return o+':'+n;}function j(n,o){if(!n.tags){n.tags=[k(o)];}else n.tags.push(k(o));return n;}function k(n){return c('EmojiLikeConstants').SOURCE_TAG_PREFIX+':'+n;}function l(n){return m(n)!=null;}function m(n){if(!n.tags)return null;var o=c('MercuryTagHelper').get(n.tags,c('EmojiLikeConstants').TAG_PREFIX_NEW);if(o)return o;return c('MercuryTagHelper').get(n.tags,c('EmojiLikeConstants').TAG_PREFIX_OLD);}f.exports={getEmojiSize:m,isEmojiLike:l,setEmojiSize:h,setEmojiSource:j};}),null);
__d('MercuryAttachment',['cx','EmojiLikeUtils','MercuryAttachmentContentType','MercuryAttachmentType','MercuryAudioType','Set','StoryAttachmentStyle'],(function a(b,c,d,e,f,g,h){'use strict';var i=function m(n){return n===Object(n);},j="_1c_u",k=new (c('Set'))([c('MercuryAttachmentType').ANIMATED_IMAGE,c('MercuryAttachmentType').PHOTO,c('MercuryAttachmentType').VIDEO,c('MercuryAttachmentType').THIRDPARTYSTICKER]),l={getAttachIconClass:function m(n){switch(n){case c('MercuryAttachmentContentType').PHOTO:return "_y2-";case c('MercuryAttachmentContentType').VIDEO:return "_y2_";case c('MercuryAttachmentContentType').MUSIC:return "_y30";case c('MercuryAttachmentContentType').VOICE:return "_y31";case c('MercuryAttachmentContentType').TEXT:return "_y32";case c('MercuryAttachmentContentType').MSWORD:return "_y33";case c('MercuryAttachmentContentType').MSXLS:return "_y34";case c('MercuryAttachmentContentType').MSPPT:return "_y35";}return "_y36";},getAttachIconClassByMime:function m(n){if(n.startsWith('image')){return "_y2-";}else if(n.startsWith('video')){return "_y2_";}else if(n.startsWith('audio')){return "_y30";}else if(n.startsWith('text/plain')){return "_y32";}else return "_y36";},getAttachTypeByMime:function m(n){if(n.startsWith('image')){return c('MercuryAttachmentContentType').PHOTO;}else if(n.startsWith('video')){return c('MercuryAttachmentContentType').VIDEO;}else if(n.startsWith('audio')){return c('MercuryAttachmentContentType').MUSIC;}else if(n.startsWith('text/plain')){return c('MercuryAttachmentContentType').TEXT;}else return c('MercuryAttachmentContentType').UNKNOWN;},convertRaw:function m(n){var o=[];for(var p=0;p<n.length;p++){var q=n[p];if(q.attach_type===c('MercuryAttachmentType').PHOTO){o.push(q);}else if(q.filename){var r=l.getAttachTypeByMime(q.filetype),s={};s.attach_type=c('MercuryAttachmentType').FILE;s.name=q.filename;s.icon_type=r;s.url='';o.push(s);}}return o;},get:function m(n){var o=[];if(n.attachments){o=n.attachments;}else if(n.raw_attachments)o=this.convertRaw(n.raw_attachments);var p=c('EmojiLikeUtils').getEmojiSize(n);if(p)o=o.concat([{attach_type:c('MercuryAttachmentType').EMOJI_LIKE,size:p}]);if(!(n.attachments&&n.attachments.length>0)){if(n.sticker_id)return o.concat([{attach_type:c('MercuryAttachmentType').STICKER}]);if(n.preview_attachments&&n.preview_attachments.length>0)return o.concat(n.preview_attachments);}return o;},resizeContain:function m(n,o){var p=n.width/n.height,q=o.width/o.height;if(q<p){return {width:Math.ceil(Math.min(n.height*q,o.width)),height:Math.ceil(Math.min(n.height,o.height))};}else return {width:Math.ceil(Math.min(n.width,o.width)),height:Math.ceil(Math.min(n.width/q,o.height))};},isBubblePreferred:function m(n){return this.isFileAttachment(n);},isPhotoAttachment:function m(n){return !!(n.attach_type==c('MercuryAttachmentType').PHOTO||n.attach_type==c('MercuryAttachmentType').ANIMATED_IMAGE||n.attach_type==c('MercuryAttachmentType').THIRDPARTYSTICKER||n.attach_type==c('MercuryAttachmentType').FILE&&n.preview_url);},isPhotoGroupAttachment:function m(n){return k.has(n.attach_type);},isVideoAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').VIDEO;},isShareAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').SHARE;},isFileAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').FILE;},isErrorAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').ERROR;},isStickerAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').STICKER;},isEmojiLikeAttachment:function m(n){return n.attach_type===c('MercuryAttachmentType').EMOJI_LIKE;},isVoiceAttachment:function m(n){if(!n.metadata)return false;return (n.metadata.type===c('MercuryAudioType').AudioClip||n.metadata.type===c('MercuryAudioType').VoiceMessageWithTranscript);},hasAttribution:function m(n){return !!n.app_attribution;},isSingleVideoAttachment:function m(n){var o=this.get(n).filter(i).filter(function(p){return (this.isVideoAttachment(p));}.bind(this));return o.length===1;},isSharedVideoAttachment:function m(n){var o=n.attach_type===c('MercuryAttachmentType').SHARE&&n.share&&n.share.subattachments&&n.share.subattachments[0];return !!(o&&o.target&&o.target.video_id);},isGenieSharedVideoAttachment:function m(n){return !!(n.attach_type===c('MercuryAttachmentType').SHARE&&n.share&&n.share.style_list.indexOf(c('StoryAttachmentStyle').GENIE_MESSAGE)>-1&&n.share.target&&n.share.target.attachment&&this.isSharedVideoAttachment(n.share.target.attachment));},isSharedVideoAttachmentMessage:function m(n){var o=this.get(n).filter(i).filter(function(p){return (this.isSharedVideoAttachment(p)||this.isGenieSharedVideoAttachment(p));}.bind(this));return o.length===1;},getVideoElem:function m(n,o){var p=o.getMessageElement(n);if(!p)return null;var q=p.getElementsByClassName(j);return q&&q.length?q[0]:p;}};f.exports=l;}),null);
__d('MercurySendErrorLogger',['Banzai','BanzaiLogger'],(function a(b,c,d,e,f,g){var h=c('BanzaiLogger').create({retry:true}),i=c('Banzai').isEnabled('mercury_send_error_logging'),j={log:function k(l){if(!i)return;var m={message_id:l.message_id,timestamp_client:Date.now(),error_type:l.error_data.type,error_code:l.error_data.code,error_description:l.error_data.description,is_transient:l.error_data.is_transient};h.log('MercurySendErrorLoggerConfig',m);}};f.exports=j;}),null);
__d('MercuryServerPayloadPreprocessor',['invariant','MessengerEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonProvider','MercuryThreadIDMap','URI'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){this.$MercuryServerPayloadPreprocessor1=k;this.$MercuryServerPayloadPreprocessor2=c('MercuryThreadIDMap').getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=c('MercuryDispatcher').getForFBID(this.$MercuryServerPayloadPreprocessor1);}i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};i.prototype.handleUpdate=function(k){var l={};!k.from_client||h(0);(k.threads||[]).forEach(function(x){this.$MercuryServerPayloadPreprocessor4(x,l);var y=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(x.thread_id);e(['MercuryServerRequests'],function(z){var aa=z.getForFBID(this.$MercuryServerPayloadPreprocessor1);aa.markThreadFetched(x.thread_id);if(y)aa.markThreadFetched(y);aa.updateLastActionTimestamp(x.timestamp);}.bind(this));}.bind(this));(k.ordered_threadlists||[]).forEach(function(x){var y=x.thread_fbids||[];y=y.concat(x.other_user_fbids||[]);x.thread_ids=y.map(function(z){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(z.toString());}.bind(this));}.bind(this));if(k.pinned_threads&&k.pinned_threads.thread_fbids)k.pinned_threads.thread_fbids=k.pinned_threads.thread_fbids.map(function(x){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);}.bind(this));if(k.delivery_receipts){var m={};for(var n=k.delivery_receipts,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=r.other_user_fbid?c('MercuryIDs').getThreadIDFromUserID(r.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(r.thread_fbid);if(s)m[s]=r.time;}k.delivery_receipts=m;}k.actions=k.actions||[];k.actions.forEach(function(x){if(x.action_type===c('MercuryActionType').SEND_MESSAGE&&x.status===c('MercuryActionStatus').ERROR)c('MercurySendErrorLogger').log(x);var y=null,z=null;if(x.other_user_fbid){z=c('MercuryIDs').getThreadIDFromUserID(x.other_user_fbid);y=x.other_user_fbid;}else if(x.thread_fbid){z=c('MercuryIDs').getThreadIDFromThreadFBID(x.thread_fbid);y=x.thread_fbid;}else if(x.thread_id){z=c('MercuryIDs').getThreadIDFromThreadFBID(x.thread_id);y=x.thread_id;}else if(x.status&&x.status!=c('MercuryActionStatus').SUCCESS&&x.client_thread_id){z=x.client_thread_id;}else h(0);y=y&&y.toString();x.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(y)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(y):z;if(x.action_type==c('MercuryActionType').SEND_MESSAGE&&x.client_thread_id&&y){x.thread_id=x.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(y,x.client_thread_id);l[y]=x.client_thread_id;}x.thread_id||h(0);if(!k.payload_source||!k.payload_source.startsWith('server'))e(['MercuryServerRequests'],function(aa){aa.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(x.timestamp);}.bind(this));}.bind(this));this.$MercuryServerPayloadPreprocessor5(k);this.$MercuryServerPayloadPreprocessor6(k);if(k.end_of_history){var t=[];for(var u=0;u<k.end_of_history.length;u++){var v=k.end_of_history[u];if(v.type=='user'){t.push('user:'+v.fbid);}else if(v.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(v.fbid))t.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(v.fbid));}k.end_of_history=t;}if(k.roger){var w={};Object.keys(k.roger).forEach(function(x){var y=Object.keys(k.roger[x]),z=void 0;if(x){z=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);}else if(y.length===1)z=c('MercuryIDs').getThreadIDFromUserID(y[0]);if(z){var aa=k.roger[x];w[z]={};for(var ba in aa)if(aa.hasOwnProperty(ba)){var ca=c('MercuryIDs').getParticipantIDFromUserID(ba);w[z][ca]=aa[ba];}}}.bind(this));k.roger=w;}k.newlyAddedClientIDs=l;k.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(k);};i.prototype.$MercuryServerPayloadPreprocessor4=function(k,l){var m=k.other_user_fbid?k.other_user_fbid:k.thread_fbid;m||h(0);var n=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(m);if(!n){n=k.other_user_fbid?c('MercuryIDs').getThreadIDFromUserID(k.other_user_fbid):c('MercuryIDs').getThreadIDFromThreadFBID(k.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(m,n);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(k.thread_id,n);l[m]=n;}k.thread_id=n;};i.prototype.$MercuryServerPayloadPreprocessor5=function(k){k.actions.forEach(function(l){if(l.action_type===c('MercuryActionType').USER_GENERATED_MESSAGE){l.attachments=l.attachments||[];l.attachments.forEach(function(m){if(c('MercuryAttachment').isShareAttachment(m)&&c('MessengerEnvironment').messengerui){var n=new (c('URI'))(m.share.uri);if(!n.getDomain())m.share.uri=n.setDomain('facebook.com').setSubdomain(c('URI').getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};i.prototype.$MercuryServerPayloadPreprocessor6=function(k){k.actions.forEach(function(l){if(l.action_type!==c('MercuryActionType').USER_GENERATED_MESSAGE)return;var m=l;if(!m.has_attachment||!m.attachments)return;for(var n=m.attachments.length-1;n>=0;n-=1){var o=m.attachments[n];if(!o.share||!o.share.style_list||o.share.style_list[0]!='genie_message')continue;if(o.share.target.genie_id)m.author=c('MercuryIDs').getParticipantIDFromUserID(o.share.target.genie_id);if(o.share.target&&!o.share.target.attachment){m.attachments.splice(n,1);m.has_attachment=m.attachments.length>0;}}});};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercuryMessageIDs',['KeyedCallbackManager'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('KeyedCallbackManager'))(),i={getServerIDs:function j(k,l){var m=k.filter(function(o){return o.indexOf('id')===-1;}),n=function o(p){var q=k.map(function(r){return p[r]?p[r]:r;});l(q);};return h.executeOrEnqueue(m,n);},addServerID:function j(k,l){h.setResource(k,l);}};f.exports=i;}),null);
__d('MercuryServerSendMessageQueueOptions',[],(function a(b,c,d,e,f,g){function h(i,j,k,l,m,n){'use strict';this.success_handler=i;this.error_handler=j;this.transport_error_handler=k;this.timeout_handler=l;this.timeout=m;this.connection_retries=n;}f.exports=h;}),null);
__d('MercuryServerSendMessageQueueSimulatedError',['AsyncRequest','AsyncResponse'],(function a(b,c,d,e,f,g){var h=9999,i={create:function j(k){var l=new (c('AsyncRequest'))(this.endpoint_uri).setData({message_batch:[k],client:this.client}),m=new (c('AsyncResponse'))(l,{});Object.assign(m,{error:h,silentError:false,transientError:true,request:l});return m;}};f.exports=i;}),null);
__d("XMessagingSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/send\/",{});}),null);
__d('MercuryServerSendMessageQueue',['BanzaiODS','LogHistory','MercuryLoggingHelper','MercuryServerRequestsConfig','MercuryServerDispatcher','MercuryServerSendMessageQueueSimulatedError','XMessagingSendController'],(function a(b,c,d,e,f,g){var h=c('LogHistory').getInstance('mercury_server_send_message_queue');function i(j,k,l,m){var n;'use strict';this.pending_message=null;this.queue=[];this.sender_id=j;this.queue_id=k;this.$MercuryServerSendMessageQueue2=l.success_handler;this.$MercuryServerSendMessageQueue1=l.error_handler;this.$MercuryServerSendMessageQueue4=l.transport_error_handler;this.$MercuryServerSendMessageQueue3=l.timeout_handler;this.client=m;var o=null;if(c('MercuryServerRequestsConfig').msgrRegion)o={name:'X-MSGR-Region',value:c('MercuryServerRequestsConfig').msgrRegion};var p=c('XMessagingSendController').getURIBuilder().getURI().toString(),q=(n={},n[p]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:o,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:l.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:l.connection_retries},n);c('MercuryServerDispatcher').registerEndpoints(q);}i.prototype.enqueue=function(j){'use strict';this.queue.push(j);this.$MercuryServerSendMessageQueue5();};i.prototype.$MercuryServerSendMessageQueue5=function(){'use strict';if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue6();return;}this.pending_message=this.queue.shift();var j={client:this.client,action_type:this.pending_message.action_type,app_id:this.pending_message.app_id,audio_ids:this.pending_message.audio_ids,body:this.pending_message.body,client_thread_id:this.pending_message.client_thread_id,content_attachment:this.pending_message.content_attachment,ephemeral_ttl_mode:this.pending_message.ephemeral_ttl_mode,file_ids:this.pending_message.file_ids,gif_ids:this.pending_message.gif_ids,has_attachment:this.pending_message.has_attachment,image_ids:this.pending_message.image_ids,location_attachment:this.pending_message.location_attachment,lightweight_action_attachment:this.pending_message.lightweight_action_attachment,log_message_data:this.pending_message.log_message_data,log_message_type:this.pending_message.log_message_type,message_id:this.pending_message.message_id,message_source_data:this.pending_message.message_source_data,offline_threading_id:this.pending_message.offline_threading_id,other_user_fbid:this.pending_message.other_user_fbid,photo_fbids:this.pending_message.photo_fbids,shareable_attachment:this.pending_message.shareable_attachment,signature_id:this.pending_message.signatureID,source:this.pending_message.source,specific_to_list:this.pending_message.specific_to_list,sticker_id:this.pending_message.sticker_id,tags:this.pending_message.tags,thread_fbid:this.pending_message.thread_fbid,timestamp:this.pending_message.timestamp,ui_push_phase:this.pending_message.ui_push_phase,video_ids:this.pending_message.video_ids,platform_xmd:this.pending_message.platform_xmd,profile_xmd:this.pending_message.profile_xmd};for(var k in j)if(j[k]===undefined||j[k]===null)delete j[k];c('MercuryServerDispatcher').trySend(c('XMessagingSendController').getURIBuilder().getURI().toString(),j,null,this.sender_id,this.queue_id);};i.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};i.prototype.$MercuryServerSendMessageQueue8=function(j){'use strict';this.$MercuryServerSendMessageQueue1(c('MercuryServerSendMessageQueueSimulatedError').create(j));h.error('mark_as_failed',JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:c('MercuryLoggingHelper').obfuscateMessage(j)}));};i.prototype.handleSuccess=function(j,k){'use strict';this.$MercuryServerSendMessageQueue2(j,k);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};i.prototype.handleError=function(j){'use strict';this.$MercuryServerSendMessageQueue1(j);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};i.prototype.handleTransportError=function(j){'use strict';this.$MercuryServerSendMessageQueue4(j);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};i.prototype.handleTimeout=function(j){'use strict';this.$MercuryServerSendMessageQueue3(j);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};i.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';h.debug('maybe_send_next_pending_message',JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:c('MercuryLoggingHelper').obfuscateMessage(this.pending_message),queue:this.queue.map(function(k){return c('MercuryLoggingHelper').obfuscateMessage(k);})}));var j='send_queue.delayed.queue_length.'+this.queue.length.toString();c('BanzaiODS').bumpEntityKey('chat.web',j);};f.exports=i;}),null);
__d('MercurySingletonMixin',['CurrentUser'],(function a(b,c,d,e,f,g){var h={_getInstances:function i(){if(!this._instances)this._instances={};return this._instances;},get:function i(){return this.getForFBID(c('CurrentUser').getID());},getForFBID:function i(j){var k=this._getInstances();if(!k[j])k[j]=new this(j);return k[j];}};f.exports=h;}),null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],(function a(b,c,d,e,f,g){var h=c('LogHistory').getInstance('mercury_server_send_message_queue_router'),i='chat.web.send_queue_router';c('BanzaiODS').setEntitySample(i,.1);function j(k){'use strict';this.queues=new (c('Map'))();this.fbid=k;}j.prototype.enqueue=function(k,l,m,n){'use strict';var o=this.queues.get(k);if(o===undefined){o=new (c('MercuryServerSendMessageQueue'))(this.fbid,k,l,m);this.queues.set(k,o);h.debug('added queue',JSON.stringify({fbid:this.fbid,queue_id:k}));c('BanzaiODS').bumpEntityKey(i,'new_queue');}o.enqueue(n);};Object.assign(j,c('MercurySingletonMixin'));f.exports=j;}),null);
__d('MercurySyncDeltaHolder',['Map','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MercurySyncDeltaHolder2=new (c('Map'))();this.$MercurySyncDeltaHolder3=[];this.$MercurySyncDeltaHolder1=0;}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.peek=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(j,k){return j-k;});return this.$MercurySyncDeltaHolder3[0];};h.prototype.pop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(l,m){return l-m;});if(this.$MercurySyncDeltaHolder3.length===0)return undefined;var j=this.$MercurySyncDeltaHolder3.shift(),k=this.$MercurySyncDeltaHolder2.get(j);this.$MercurySyncDeltaHolder2['delete'](j);return {seqID:j,delta:k};};h.prototype.push=function(j,k){if(this.$MercurySyncDeltaHolder2.has(j))return;this.$MercurySyncDeltaHolder2.set(j,k);this.$MercurySyncDeltaHolder3.push(j);};h.prototype.getLastSeqID=function(){return this.$MercurySyncDeltaHolder1;};h.prototype.updateLastSeqID=function(j){this.$MercurySyncDeltaHolder1=j;};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/unseen_thread_ids\/",{});}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/mercury\/change_mentions_mute_thread\/",{});}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/mercury\/change_reactions_mute_thread\/",{});}),null);
__d('MercuryServerRequests',['errorCode','invariant','Arbiter','AsyncResponse','BanzaiODS','ChannelConstants','ChatReliabilityInstrumentation','CurrentUser','FBID','LogHistory','MercuryActionStatus','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryConfig','MercuryDispatcher','MercuryErrorType','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySendErrorLogger','MercuryServerPayloadPreprocessor','MercuryServerRequestsConfig','MercuryServerSendMessageQueueRouter','MercuryServerURIs','MercurySingletonProvider','MercurySourceType','MercurySyncDeltaHolder','MercuryThreadIDMap','MercuryThreadlistConstants','MercuryMessageIDs','MessagingConfig','MessagingTag','PageMessageEnumTag','MercuryServerDispatcher','MercuryServerSendMessageQueueOptions','XMercuryUnseenThreadIDsController','XMessagingChangeMentionsMuteModeController','XMessagingChangeReactionsMuteModeController','createObjectFrom','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('LogHistory').getInstance('mercury_server'),k=c('MercuryAPIArgsSource').MERCURY,l=1000,m=30*1000;function n(y){return y.getError()?'_'+y.getError():'';}function o(y,z){var aa=babelHelpers['extends']({},y),ba=void 0;if(z.threads){if(!aa.threads)aa.threads={};for(ba in z.threads)aa.threads[ba]=Object.keys(c('createObjectFrom')((aa.threads[ba]||[]).concat(z.threads[ba])));}if(z.messages){if(!aa.messages)aa.messages={};for(ba in z.messages){if(!aa.messages[ba])aa.messages[ba]={};for(var ca in z.messages[ba])if(aa.messages[ba][ca]){aa.messages[ba][ca]=s(aa.messages[ba][ca],z.messages[ba][ca]);}else aa.messages[ba][ca]=z.messages[ba][ca];}}aa.client=y.client||z.client;return aa;}function p(y,z){var aa=Object.assign(c('createObjectFrom')(y.folders,true),c('createObjectFrom')(z.folders,true)),ba=y.client||z.client;return {folders:Object.keys(aa),client:ba};}function q(y,z){for(var aa in z)if(y[aa]&&typeof y[aa]==='object'){y[aa]=s(y[aa],z[aa]);}else if(z[aa]&&typeof z[aa]==='object'){var ba={};Object.assign(ba,z[aa]);y[aa]=ba;}return y;}function r(y,z){return z;}function s(y,z){var aa=y.offset<z.offset?y.offset:z.offset,ba=y.offset+y.limit,ca=z.offset+z.limit,da=ba>ca?ba:ca,ea=da-aa,fa=y.timestamp>z.timestamp?y.timestamp:z.timestamp;return {offset:aa,limit:ea,timestamp:fa};}function t(y,z){var aa=y.client||z.client,ba={ids:{},client:aa};Object.assign(ba.ids,y.ids,z.ids);return ba;}function u(y,z){var aa={},ba=void 0,ca=y.client||z.client;delete y.client;delete z.client;for(ba in y)Object.assign(aa,c('createObjectFrom')(y[ba],ba));for(ba in z)Object.assign(aa,c('createObjectFrom')(z[ba],ba));var da={client:ca};for(var ea in aa){ba=aa[ea];if(!da[ba])da[ba]=[];da[ba].push(ea);}return da;}function v(y,z){var aa=y.client||z.client,ba=c('createObjectFrom')(y.ids,true),ca=c('createObjectFrom')(z.ids,true),da=Object.assign(ba,ca);return {ids:Object.keys(da),client:aa};}function w(y){this.$MercuryServerRequests1=y;this.$MercuryServerRequests2=0;this.$MercuryServerRequests3={};this.$MercuryServerRequests4={};this.__threadIDMap=c('MercuryThreadIDMap').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests5=c('MercuryDispatcher').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests6=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests7=new (c('MercuryServerSendMessageQueueOptions'))(function(z,aa){this.__handleUpdate(z,aa);}.bind(this),function(z){return this.$MercuryServerRequests9(z);}.bind(this),function(z){this.$MercuryServerRequests10(z);}.bind(this),function(z){return this.$MercuryServerRequests11(z);}.bind(this),c('MercuryServerRequestsConfig').sendMessageTimeout,c('MessagingConfig').SEND_CONNECTION_RETRIES);this.$MercuryServerRequests8=c('MercurySyncDeltaHolder').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests12();}w.getForFBID=function(y){return x.getForFBID(y);};w.get=function(){return x.get();};w.prototype.fetchThreadlistInfo=function(y,z){var aa=arguments.length<=2||arguments[2]===undefined?c('MessagingTag').INBOX:arguments[2],ba=arguments[3],ca=arguments.length<=4||arguments[4]===undefined?k:arguments[4],da=ba?c('MercuryServerDispatcher').IMMEDIATE:null,ea={client:ca};ea[aa]={offset:y,limit:z,filter:ba};this.__sendRequest(c('MercuryServerURIs').THREADLIST_INFO,ea,da);};w.prototype.fetchUnseenThreadIDs=function(){var y=arguments.length<=0||arguments[0]===undefined?c('MessagingTag').INBOX:arguments[0],z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c('XMercuryUnseenThreadIDsController').getURIBuilder().getURI().toString(),{});};w.prototype.fetchUnreadThreadIDs=function(y){var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c('MercuryServerURIs').UNREAD_THREADS,{folders:[y],client:z});};w.prototype.fetchThreadData=function(y){var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];c('MercuryAssert').allThreadID(y);var aa={threads:{},client:z},ba=[],ca=[];y.forEach(function(ea){if(this.$MercuryServerRequests3[ea])return;this.$MercuryServerRequests3[ea]=true;var fa=this.__threadIDMap.getServerIDFromClientIDNow(ea),ga=c('MercuryIDs').tokenize(ea);if(ga.type=='user'){ba.push(ga.value);aa.threads.user_ids=ba;}else if(ga.type=='thread'){if(fa){ca.push(fa);}else ca.push(ga.value);aa.threads.thread_fbids=ca;}else if(ga.type=='root'){if(fa){ca.push(fa);aa.threads.thread_fbids=ca;}}else if(ga.type!='pending')throw new Error('Unknown thread type',ga);}.bind(this));this.$MercuryServerRequests5.inform('fetch-thread-data',aa);if(aa.threads.thread_fbids)aa.threads.thread_fbids.forEach(function(ea){if(!ea)c('ChatReliabilityInstrumentation').logERROR('Invalid FBID sent to thread_info.php: '+JSON.stringify(y));});for(var da in aa.threads){this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,aa);break;}};w.prototype.ensureThreadIsFetched=function(y){var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!this.__threadIDMap.getClientIDFromServerIDNow(y)&&!this.$MercuryServerRequests3[y]){this.$MercuryServerRequests3[y]=true;this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,{threads:{thread_fbids:[y]},client:z});}};w.prototype.fetchThreadMessages=function(y,z,aa,ba,ca){var da=arguments.length<=5||arguments[5]===undefined?k:arguments[5];c('MercuryAssert').isThreadID(y);var ea=void 0,fa=void 0,ga=c('MercuryIDs').tokenize(y),ha=this.__threadIDMap.getServerIDFromClientIDNow(y),ia=false;if(ha){ea=ha;fa=ga.type=='user'?'user_ids':'thread_fbids';}else{ea=ga.value;switch(ga.type){case 'user':fa='user_ids';ia=true;break;case 'thread':fa='thread_fbids';break;}}var ja={messages:{},threads:{},client:da};if(fa){ja.messages[fa]={};ja.messages[fa][ea]={offset:z,timestamp:ba,limit:aa};if(ia)ja.threads[fa]=[ea];this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,ja,ca);}else this.__threadIDMap.getServerIDFromClientID(y,function(ka){ja.messages.thread_fbids={};ja.messages.thread_fbids[ka]={offset:z,timestamp:ba,limit:aa};this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,ja,ca);}.bind(this));};w.prototype.handleThreadInfoError=function(y){var z=y.getData(),aa=[];if(z.messages){for(var ba in z.messages.thread_fbids){var ca=this.__threadIDMap.getClientIDFromServerIDNow(ba);if(ca)aa.push(this.$MercuryServerRequests13(ca));}for(var da in z.messages.user_ids)aa.push(this.$MercuryServerRequests13('user:'+da));for(var ea in z.messages.group_ids)aa.push(this.$MercuryServerRequests13('group:'+ea));}if(aa.length)this.$MercuryServerRequests5.handleUpdate({actions:aa,from_client:true,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});if(z.threads&&(z.threads.user_ids||z.threads.group_ids||z.threads.thread_ids)){var fa=5,ga=true;if(!z.retry_count){z.retry_count=0;if(z.messages)delete z.messages;}else if(z.retry_count>=fa){ga=false;(z.threads.thread_ids||[]).forEach(function(ia){if(ia in this.$MercuryServerRequests3)delete this.$MercuryServerRequests3[ia];}.bind(this));}if(ga){var ha=Math.pow(2,z.retry_count)*1000;c('setTimeoutAcrossTransitions')(function(){j.log('retry_thread','{}');this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,z);}.bind(this),ha);z.retry_count++;}}};w.prototype.markFolderAsRead=function(y){this.__sendRequest(c('MercuryServerURIs').MARK_FOLDER_READ,{folder:y});var z=[{action_type:c('MercuryGlobalActionType').MARK_ALL_READ,folder:y}];this.$MercuryServerRequests5.handleUpdate({global_actions:z,from_client:true,payload_source:c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS});};w.prototype.changeThreadReadStatus=function(y,z,aa,ba,ca,da){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(ea){var fa,ga={ids:(fa={},fa[ea]=z,fa),source:aa,watermarkTimestamp:ba,shouldSendReadReceipt:ca,commerce_last_message_type:da};j.log('initiate_change_read_status',JSON.stringify({thread_id:y,thread_fbid:ea,mark_as_read:z,watermarkTimestamp:ba}));this.__sendRequest(c('MercuryServerURIs').CHANGE_READ_STATUS,ga);}.bind(this));};w.prototype.changeThreadArchivedStatus=function(y,z,aa){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(ba){var ca={ids:{},source:aa};ca.ids[ba]=z;this.__sendRequest(c('MercuryServerURIs').CHANGE_ARCHIVED_STATUS,ca);}.bind(this));};w.prototype.changeThreadFolder=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){var ba={};ba[z]=[aa];this.__sendRequest(c('MercuryServerURIs').MOVE_THREAD,ba);}.bind(this));};w.prototype.changeMutingOnThread=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){this.__sendRequest(c('MercuryServerURIs').CHANGE_MUTE_THREAD,{thread_fbid:aa,mute_settings:z,payload_source:k});}.bind(this));};w.prototype.changeMentionsMutingOnThread=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){this.__sendRequest(c('XMessagingChangeMentionsMuteModeController').getURIBuilder().getURI(),{thread_fbid:aa,mentions_mute_mode:z,payload_source:k});}.bind(this));};w.prototype.changeReactionsMutingOnThread=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){this.__sendRequest(c('XMessagingChangeReactionsMuteModeController').getURIBuilder().getURI(),{thread_fbid:aa,reactions_mute_mode:z,payload_source:k});}.bind(this));};w.prototype.markThreadSpam=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){this.__sendRequest(c('MercuryServerURIs').MARK_SPAM,{id:aa,source:z});}.bind(this));};w.prototype.unmarkThreadSpam=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){this.__sendRequest(c('MercuryServerURIs').UNMARK_SPAM,{id:aa,source:z});}.bind(this));};w.prototype.deleteThread=function(y,z){c('MercuryAssert').isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(aa){var ba={ids:[aa],source:z};this.__sendRequest(c('MercuryServerURIs').DELETE_THREAD,ba);}.bind(this));};w.prototype.deleteMessages=function(y,z){c('MercuryMessageIDs').getServerIDs(z||[],function(aa){this.__sendRequest(c('MercuryServerURIs').DELETE_MESSAGES,{message_ids:aa});}.bind(this));};w.prototype.sendDeliveryReceipts=function(y,z){c('MercuryMessageIDs').getServerIDs(y||[],function(aa){this.__sendRequest(c('MercuryServerURIs').DELIVERY_RECEIPTS,{message_ids:aa,thread_ids:z});}.bind(this));};w.prototype.sendNewMessage=function(y){var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!y.offline_threading_id)c('BanzaiODS').bumpEntityKey('chat.web','missing_otid_on_send');if(y.client_state&&y.client_state!==c('MercuryMessageClientState').SEND_TO_SERVER)return;var aa=c('MercuryIDs').tokenize(y.thread_id),ba=aa.type,ca=babelHelpers['extends']({},y);ca.thread_id=null;if(ba=='user'){ca.other_user_fbid=aa.value;this.$MercuryServerRequests14(ca,z);}else if(ba=='thread'){ca.thread_fbid=aa.value;this.$MercuryServerRequests14(ca,z);}else if(ba=='root'&&aa.value==ca.offline_threading_id){ca.client_thread_id=y.thread_id;this.$MercuryServerRequests14(ca,z);}else{c('MercuryIDs').isLocalThread(y.thread_id)||i(0);this.__threadIDMap.getServerIDFromClientID(y.thread_id,function(da){ca.thread_fbid=da;this.$MercuryServerRequests14(ca,z);}.bind(this));}};w.prototype.$MercuryServerRequests14=function(y,z){c('Arbiter').inform(c('ChannelConstants').ATTEMPT_RECONNECT);this.$MercuryServerRequests4[y.message_id]=Date.now();c('MercuryServerSendMessageQueueRouter').getForFBID(this.$MercuryServerRequests1).enqueue(y.other_user_fbid||y.thread_fbid||y.client_thread_id,this.$MercuryServerRequests7,z,y);};w.prototype.markSeen=function(){var y=this.$MercuryServerRequests2;this.__sendRequest(c('MercuryServerURIs').MARK_SEEN,{seen_timestamp:y});};w.prototype.$MercuryServerRequests15=function(y,z,aa,ba){var ca=y.getData(),da=ca.message_batch||[ca];j.debug('handle_send_message_error_common',JSON.stringify({reliability_error_status:aa,request_error_status:z,error_data:ba,message_list:da}));var ea=da.map(function(ga){var ha={action_type:c('MercuryActionType').SEND_MESSAGE,other_user_fbid:ga.other_user_fbid,thread_fbid:ga.thread_fbid,client_message_id:ga.message_id,message_id:ga.message_id,client_thread_id:ga.client_thread_id,status:z,error_data:ba};return ha;});ea.forEach(function(ga){if(ga.action_type===c('MercuryActionType').SEND_MESSAGE&&ga.status===c('MercuryActionStatus').ERROR)this.__logMercurySendError(ga);},this);var fa={actions:ea,payload_source:c('MercuryPayloadSource').CLIENT_HANDLE_ERROR};this.$MercuryServerRequests6.handleUpdate(fa);};w.prototype.handleSendMessageError=function(y){var z=y.getPayload(),aa=null,ba=null;if(z&&z.error_payload){aa=c('MercuryActionStatus').UNCONFIRMED;ba='send_error';}else{aa=c('MercuryActionStatus').ERROR;ba='request_error'+n(y);}var ca=y.error;if(ca===1404102)c('AsyncResponse').verboseErrorHandler(y);var da=/<.*>/.test(y.getErrorDescription())?y.getErrorSummary():y.getErrorDescription();this.$MercuryServerRequests15(y.getRequest(),aa,ba,{type:c('MercuryErrorType').SERVER,code:y.getError(),description:da,is_transient:y.isTransient()});};w.prototype.handleSendMessageTransportError=function(y){this.$MercuryServerRequests15(y.getRequest(),c('MercuryActionStatus').ERROR,'transport_error'+n(y),{type:c('MercuryErrorType').TRANSPORT,code:y.getError(),is_transient:true});};w.prototype.handleSendMessageTimeout=function(y){this.$MercuryServerRequests15(y,c('MercuryActionStatus').ERROR,'transport_timeout',{type:c('MercuryErrorType').TIMEOUT,is_transient:true});};w.prototype.getLastActionTimestamp=function(){return this.$MercuryServerRequests2;};w.prototype.__logMercurySendError=function(y){c('MercurySendErrorLogger').log(y);};w.prototype.updateLastActionTimestamp=function(y){var z=Date.now()-1000*60*60*24;if(y&&y>z)this.$MercuryServerRequests2=Math.max(this.$MercuryServerRequests2,y);};w.prototype.markThreadFetched=function(y){delete this.$MercuryServerRequests3[y];};w.prototype.$MercuryServerRequests13=function(y){return {action_type:c('MercuryActionType').LOG_MESSAGE,thread_id:y,message_id:y,timestamp:Date.now(),is_unread:false,source:c('MercurySourceType').UNKNOWN,log_message_body:'',log_message_type:c('MercuryLogMessageType').SERVER_ERROR,log_message_data:{}};};w.prototype.__getForAsyncRequest=function(y){var z=y.getData(),aa=z.request_user_id?z.request_user_id:c('CurrentUser').getID();return w.getForFBID(aa);};w.prototype.__handleUpdate=function(y,z){this.__getForAsyncRequest(z).$MercuryServerRequests6.handleUpdate(y);};w.prototype.$MercuryServerRequests16=function(y){var z=this.__getForAsyncRequest(y);z.handleThreadInfoError(y);};w.prototype.$MercuryServerRequests9=function(y){var z=this.__getForAsyncRequest(y.getRequest());z.handleSendMessageError(y);};w.prototype.$MercuryServerRequests10=function(y){var z=this.__getForAsyncRequest(y.getRequest());z.handleSendMessageTransportError(y);};w.prototype.$MercuryServerRequests11=function(y){var z=this.__getForAsyncRequest(y);z.handleSendMessageTimeout(y);};w.prototype.$MercuryServerRequests12=function(){var y,z=null;if(c('MercuryServerRequestsConfig').msgrRegion)z={name:'X-MSGR-Region',value:c('MercuryServerRequestsConfig').msgrRegion};var aa=(y={},y[c('MercuryServerURIs').THREAD_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_DEFERRED_MULTI,customHeader:z,batch_function:o,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this),error_handler:function(ea){return (this.$MercuryServerRequests16(ea.getRequest()));}.bind(this),timeout_handler:function(ea){return this.$MercuryServerRequests16(ea);}.bind(this),timeout:m},y[c('MercuryServerURIs').MARK_FOLDER_READ]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').CHANGE_READ_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){this.__handleUpdate(ea,fa);var ga=(ea.threads||[]).map(function(ha){return ha&&ha.thread_id;});j.log('response_change_read_status',JSON.stringify({threads:ga}));}.bind(this)},y[c('MercuryServerURIs').MARK_SEEN]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:z,batch_function:r,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').THREADLIST_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE_UNIQUE,customHeader:z,batch_function:q,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').MARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').UNMARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').UNREAD_THREADS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE_UNIQUE,customHeader:z,batch_function:p,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').CHANGE_ARCHIVED_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:z,batch_function:t,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').DELETE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:z,batch_function:v,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').DELETE_MESSAGES]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').DELIVERY_RECEIPTS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').MOVE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:z,batch_function:u,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y[c('MercuryServerURIs').CHANGE_MUTE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)},y),ba=c('XMercuryUnseenThreadIDsController').getURIBuilder().getURI().toString();aa[ba]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)};var ca=c('XMessagingChangeMentionsMuteModeController').getURIBuilder().getURI().toString();aa[ca]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)};var da=c('XMessagingChangeReactionsMuteModeController').getURIBuilder().getURI().toString();aa[da]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:z,handler:function(ea,fa){return this.__handleUpdate(ea,fa);}.bind(this)};c('MercuryServerDispatcher').registerEndpoints(aa);};w.prototype.__sendRequest=function(y,z,aa){if(c('MercuryConfig').MessengerCachiusUseClientSeqIDWWW)switch(y){case c('MercuryServerURIs').THREADLIST_INFO:case c('MercuryServerURIs').THREAD_INFO:z.cachius_min_seq_id=this.$MercuryServerRequests8.getLastSeqID();break;default:break;}c('MercuryServerDispatcher').trySend(y,z,aa,this.$MercuryServerRequests1);};w.prototype.__getFBID=function(){return this.$MercuryServerRequests1;};var x=new (c('MercurySingletonProvider'))(w);f.exports=w;}),null);
__d('MercuryThreadIDMap',['KeyedCallbackManager','MercuryAssert','MercuryIDs','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercuryThreadIDMap1=j;this.$MercuryThreadIDMap2=new (c('KeyedCallbackManager'))();this.$MercuryThreadIDMap3=new (c('KeyedCallbackManager'))();}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.setServerIDToClientID=function(j,k){var l=this.getClientIDFromServerIDNow(j);if(l){l!==k;return;}this.forceSetServerIDToClientID(j,k);};h.prototype.forceSetServerIDToClientID=function(j,k){this.$MercuryThreadIDMap2.setResource(j,k);this.$MercuryThreadIDMap3.setResource(k,j);};h.prototype.setDeprecatedServerIDToClientID=function(j,k){if(j)this.$MercuryThreadIDMap2.setResource(j,k);};h.prototype.getClientIDFromServerIDNow=function(j){return this.$MercuryThreadIDMap2.getResource(j);};h.prototype.getClientIDFromServerID=function(j,k){this.$MercuryThreadIDMap2.executeOrEnqueue(j,k);e(['MercuryServerRequests'],function(l){l.getForFBID(this.$MercuryThreadIDMap1).ensureThreadIsFetched(j);}.bind(this));};h.prototype.getServerIDFromClientIDNow=function(j){return this.$MercuryThreadIDMap3.getResource(j);};h.prototype.getServerIDFromClientID=function(j,k){c('MercuryAssert').isThreadID(j);var l=this.$MercuryThreadIDMap3.executeOrEnqueue(j,k);e(['MercuryServerRequests'],function(m){var n=this.$MercuryThreadIDMap3.getUnavailableResources(l),o=c('MercuryIDs').tokenize(j);if(n.length&&o.type!='root')m.getForFBID(this.$MercuryThreadIDMap1).fetchThreadData(n);}.bind(this));};h.prototype.hasClientIDForServerID=function(j){return !!this.getClientIDFromServerIDNow(j);};h.prototype.convertThreadIDIfAvailable=function(j){var k=this.getClientIDFromServerIDNow(j);return k||j;};h.prototype.canLinkExternally=function(j){c('MercuryAssert').isThreadID(j);var k=c('MercuryIDs').tokenize(j);return k.type=='user'||!!this.getServerIDFromClientIDNow(j);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('MercuryParticipantFetcher',['LogHistory','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','Set','ShortProfiles','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('LogHistory').getInstance('short_profiles');function i(k){this.$MercuryParticipantFetcher4=c('MercuryServerPayloadPreprocessor').getForFBID(k);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new (c('Set'))();this.$MercuryParticipantFetcher3=new (c('Set'))();}i.prototype.fetch=function(k){this.$MercuryParticipantFetcher5(k);this.$MercuryParticipantFetcher6();};i.prototype.fetchMulti=function(k){k.forEach(function(l){return this.$MercuryParticipantFetcher5(l);}.bind(this));this.$MercuryParticipantFetcher6();};i.prototype.$MercuryParticipantFetcher5=function(k){if(!this.$MercuryParticipantFetcher3.has(k))this.$MercuryParticipantFetcher2.add(k);};i.prototype.$MercuryParticipantFetcher6=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;c('setImmediate')(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(k){return this.$MercuryParticipantFetcher3.add(k);}.bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher2,function(k){k.forEach(function(l){return this.$MercuryParticipantFetcher3['delete'](l.id);}.bind(this));this.$MercuryParticipantFetcher8(k);}.bind(this));this.$MercuryParticipantFetcher2.clear();}.bind(this));};i.prototype.$MercuryParticipantFetcher7=function(k,l){var m=[];k.forEach(function(n){var o=c('MercuryIDs').tokenize(n),p=o.type,q=o.value;p==='fbid'&&m.push(q);});if(m.length>0){c('ShortProfiles').getMulti(m,function(n){var o=[];for(var p in n)o.push(j(n[p],p));l(o);if(o.length!==m.length)h.error('server_fetch_participant_count_error',JSON.stringify({expectedIDs:m,receivedIDs:Object.keys(n)}));});h.debug('client_fetch_participants',JSON.stringify({userIDs:m}));}};i.prototype.$MercuryParticipantFetcher8=function(k){this.$MercuryParticipantFetcher4.handleUpdate({participants:k,from_client:false,payload_source:c('MercuryPayloadSource').SERVER_FETCH_PARTICIPANTS});};function j(k,l){var m=babelHelpers['extends']({gender:k.gender,fbid:k.id||l,href:k.uri,id:c('MercuryIDs').getParticipantIDFromUserID(k.id||l),image_src:k.thumbSrc,name:k.name,short_name:k.firstName,employee:k.employee,is_employee_away:k.is_employee_away,type:k.type,vanity:k.vanity,is_friend:k.is_friend,is_messenger_user:k.is_messenger_user},{});if(k.officeStatus){m.officeStatus=k.officeStatus;m.officeStatusEndDate=k.officeStatusEndDate;m.officeStatusComment=k.officeStatusComment;m.officeStatusLocation=k.officeStatusLocation;}if(k.timezone||k.timezone===0)m.timezone=k.timezone;if(k.personal_id)m.personal_id=k.personal_id;if(k.work_id)m.work_id=k.work_id;return m;}f.exports=i;}),null);
__d('MercuryVanityIDMap',['Map','MercuryAssert'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Map'))(),i=new (c('Map'))(),j={getID:function k(l){return h.get(l.toLowerCase());},getVanity:function k(l){return i.get(l);},hasID:function k(l){return i.has(l);},hasVanity:function k(l){return h.has(l.toLowerCase());},set:function k(l,m){c('MercuryAssert').isParticipantID(m);var n=l.toLowerCase();h.set(n,m);i.set(m,n);}};f.exports=j;}),null);
__d('MercuryParticipants',['fbt','CurrentUser','EventEmitter','ImageSourceRequest','ImageSourceType','ImmutableObject','KeyedCallbackManager','MercuryAssert','MercuryIDs','MercuryParticipantFetcher','MercuryParticipantTypes','MercuryParticipantsConstants','MercuryDispatcher','MercuryVanityIDMap','PhotoResizeModeConst','Set','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i='change';function j(l){this.$MercuryParticipants1=l;this.$MercuryParticipants2=new (c('EventEmitter'))();this.$MercuryParticipants3=new (c('KeyedCallbackManager'))();this.$MercuryParticipants4=new (c('MercuryParticipantFetcher'))(this.$MercuryParticipants1);this.$MercuryParticipants5=c('MercuryDispatcher').getForFBID(this.$MercuryParticipants1);this.$MercuryParticipants5.subscribe('update-participants',function(m,n){if(n.participants&&n.participants.length>0)this.$MercuryParticipants6(n.participants);}.bind(this));this.$MercuryParticipants5.subscribe('invalidate-global-state',function(){this.$MercuryParticipants7();}.bind(this));}j.prototype.addListener=function(l,m){return this.$MercuryParticipants2.addListener(l,m);};j.prototype.getIDFromVanityOrFBID=function(l){if(!l)return null;if(c('MercuryVanityIDMap').hasVanity(l))return c('MercuryVanityIDMap').getID(l);if(/^\d+$/.test(l))return c('MercuryIDs').getParticipantIDFromUserID(l);return undefined;};j.prototype.getNow=function(l){return this.$MercuryParticipants8(l);};j.prototype.getOrFetch=function(l){var m=this.$MercuryParticipants8(l);if(!m)this.$MercuryParticipants4.fetch(l);return m;};j.prototype.get=function(l,m){c('MercuryAssert').isParticipantID(l);return this.$MercuryParticipants9([l],function(n){m(n[l]);});};j.prototype.getMulti=function(l,m){return this.$MercuryParticipants9(l,m);};j.prototype.getBigImageMulti=function(l,m){c('MercuryAssert').allParticipantIDs(l);var n=c('MercuryParticipantsConstants').BIG_IMAGE_SIZE;return this.$MercuryParticipants9(l,function(o){var p={},q=0,r=new (c('Set'))(),s=function(w,x){q++;p[w]=x;if(q===l.length){m(p);if(r.size>0)this.$MercuryParticipants10(r);}}.bind(this),t=function(w,x){this.$MercuryParticipants3.setResource(w,c('ImmutableObject').set(this.$MercuryParticipants3.getResource(w),{big_image_src:x.uri}));r.add(w);s(w,x.uri);}.bind(this);for(var u in o){var v=o[u];if(!v.big_image_src){new (c('ImageSourceRequest'))().setFBID(c('MercuryIDs').getUserIDFromParticipantID(u)).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(n,n).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(t.bind(null,u)).send();}else s(v.id,v.big_image_src);}}.bind(this));};j.prototype.getOrderedBigImageMulti=function(l,m){return this.getBigImageMulti(l,function(n){m(l.map(function(o){return n[o];}));});};j.prototype.$MercuryParticipants9=function(l,m){c('MercuryAssert').allParticipantIDs(l);var n=this.$MercuryParticipants3.executeOrEnqueue(l,m),o=this.$MercuryParticipants3.getUnavailableResources(n).filter(function(p){var q=c('MercuryIDs').tokenize(p),r=q.type,s=q.value;if(r==='email'){this.$MercuryParticipants11(p,s);return false;}if(r==='name'){this.$MercuryParticipants12(p,s);return false;}return true;}.bind(this));this.$MercuryParticipants4.fetchMulti(o);return this.$MercuryParticipants13(n);};j.prototype.$MercuryParticipants8=function(l){var m=this.$MercuryParticipants3.getResource(l);if(!m){var n=c('MercuryIDs').tokenize(l),o=n.type,p=n.value;if(o==='email')m=this.$MercuryParticipants11(l,p);if(o==='name')m=this.$MercuryParticipants12(l,p);}return m;};j.prototype.$MercuryParticipants11=function(l,m){var n=new (c('ImmutableObject'))(k(l,m));this.$MercuryParticipants3.setResource(l,n);return n;};j.prototype.$MercuryParticipants12=function(l,m){var n=new (c('ImmutableObject'))({gender:c('MercuryParticipantsConstants').UNKNOWN_GENDER,href:null,id:l,image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,big_image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,name:m,short_name:m,employee:false});this.$MercuryParticipants3.setResource(l,n);return n;};j.prototype.$MercuryParticipants10=function(l){this.$MercuryParticipants2.emit(i,l);};j.prototype.$MercuryParticipants6=function(l){var m=l.map(function(n){return n.id;});l=l.map(function(n){if(n.vanity)c('MercuryVanityIDMap').set(n.vanity,n.id);var o=this.$MercuryParticipants3.getResource(n.id);return o?c('ImmutableObject').set(o,n):new (c('ImmutableObject'))(this.$MercuryParticipants14(n));}.bind(this));this.$MercuryParticipants3.addResourcesAndExecute(c('createObjectFrom')(m,l));this.$MercuryParticipants10(new (c('Set'))(m));};j.prototype.$MercuryParticipants14=function(l){var m=l.type===c('MercuryParticipantTypes').USER||l.type===c('MercuryParticipantTypes').FRIEND;if(!m)return l;if(!l.name&&!l.href&&!l.vanity){var n=h._("Ng\u01b0\u1eddi d\u00f9ng Facebook");l.name=n;l.short_name=n;}return l;};j.prototype.$MercuryParticipants13=function(l){return {remove:function(){this.$MercuryParticipants3.unsubscribe(l);}.bind(this)};};j.prototype.$MercuryParticipants7=function(){this.$MercuryParticipants3=new (c('KeyedCallbackManager'))();};function k(l,m){return {gender:c('MercuryParticipantsConstants').UNKNOWN_GENDER,href:null,id:l,image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,big_image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,name:m,short_name:m,employee:false,fbid:undefined,accepts_messenger_user_feedback:undefined,is_business_enabled:undefined,is_messenger_platform_bot:undefined,is_employee_away:undefined,is_friend:undefined,is_messenger_user:undefined,is_verified:undefined,type:undefined,vanity:undefined,timezone:undefined,personal_id:undefined,work_id:undefined};}f.exports=new j(c('CurrentUser').getID());}),null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],(function a(b,c,d,e,f,g){'use strict';var h='fbid:'+c('CurrentUser').getID(),i={getID:function j(){return h;},isViewer:function j(k){c('MercuryAssert').isParticipantID(k);return k===h;}};f.exports=i;}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca];}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa);}else m();});});}};f.exports=i;}),null);
__d('MessengerDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('MercuryFilters',['MessagingTag','arrayContains'],(function a(b,c,d,e,f,g){var h=[c('MessagingTag').UNREAD],i={ALL:'all',UNREAD:c('MessagingTag').UNREAD,getSupportedFilters:function j(){return h.concat();},isSupportedFilter:function j(k){return c('arrayContains')(h,k);}};f.exports=i;}),null);
__d('MercuryDisplayTimeFilterMessageRenderer',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={renderFilteredContent:function j(k){if(k.is_filtered_content_bh)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec ch\u1ee9a li\u00ean k\u1ebft b\u1ecb ch\u1eb7n ho\u1eb7c c\u00f3 h\u1ea1i.");if(k.is_filtered_content_account)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u0129nh vi\u1ec5n v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi y\u00eau c\u1ea7u x\u00e1c minh.");if(k.is_filtered_content_quasar)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec c\u00f3 ch\u1ee9a n\u1ed9i dung b\u1ecb ch\u1eb7n ho\u1eb7c c\u00f3 h\u1ea1i.");if(k.is_filtered_content_invalid_app)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec \u1ee9ng d\u1ee5ng g\u1eedi tin nh\u1eafn b\u1ecb ch\u1eb7n g\u1eedi tin.");return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 t\u1ea1m th\u1eddi b\u1ecb x\u00f3a v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi y\u00eau c\u1ea7u x\u00e1c minh ho\u1eb7c \u0111\u00e3 b\u1ecb x\u00e1c \u0111\u1ecbnh l\u00e0 l\u1ea1m d\u1ee5ng.");}};f.exports=i;}),null);
__d('MercuryGiftSnippetRenderer',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={renderText:function j(k,l){return k?h._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t tin nh\u1eafn valentine."):h._("{name} \u0111\u00e3 g\u1eedi m\u1ed9t tin nh\u1eafn valentine.",[h.param('name',l)]);}};f.exports=i;}),null);
__d('MercuryLocalIDs',['PresenceUtil','randomInt'],(function a(b,c,d,e,f,g){'use strict';var h={generateMessageID:function j(k){var l=k||Date.now(),m=c('randomInt')(0,4294967295),n=c('PresenceUtil').getSessionID();return '<'+l+':'+m+'-'+n+'@mail.projektitan.com>';},generateThreadID:function j(k){return 'root:'+h.generateOfflineThreadingID(k);},generateOfflineThreadingID:function j(k){var l=k||Date.now(),m=c('randomInt')(0,4294967295),n=('0000000000000000000000'+m.toString(2)).slice(-22),o=l.toString(2)+n;return i(o.slice(-63));}};function i(j){var k='';while(j!='0'){var l=0,m='';for(var n=0;n<j.length;n++){l=2*l+parseInt(j[n],10);if(l>=10){m+='1';l-=10;}else m+='0';}k=l.toString()+k;j=m.slice(m.indexOf('1'));}return k;}f.exports=h;}),null);
__d('MercurySyncDeltaTypes',[],(function a(b,c,d,e,f,g){'use strict';var h={AdminAddedToGroupThread:'AdminAddedToGroupThread',AdminRemovedFromGroupThread:'AdminRemovedFromGroupThread',AdminTextMessage:'AdminTextMessage',DeliveryReceipt:'DeliveryReceipt',ForcedFetch:'ForcedFetch',MarkRead:'MarkRead',MarkUnread:'MarkUnread',MessageDelete:'MessageDelete',NewMessage:'NewMessage',PagesManagerEvent:'PagesManagerEvent',ParticipantLeftGroupThread:'ParticipantLeftGroupThread',ParticipantsAddedToGroupThread:'ParticipantsAddedToGroupThread',ReadReceipt:'ReadReceipt',ReplaceMessage:'ReplaceMessage',RTCEventLog:'RTCEventLog',ThreadAction:'ThreadAction',ThreadDelete:'ThreadDelete',ThreadMuteSettings:'ThreadMuteSettings',ThreadName:'ThreadName',JoinableMode:'JoinableMode',ApprovalMode:'ApprovalMode',ApprovalQueue:'ApprovalQueue',ClientPayload:'ClientPayload',GenieMessage:'GenieMessage',MontageMessage:'MontageMessage',RtcCallData:'RtcCallData'};f.exports=h;}),null);
__d('MercurySyncFakeDFFSender',['Arbiter','ChannelConstants','MercurySingletonProvider','MercurySyncDeltaTypes'],(function a(b,c,d,e,f,g){'use strict';var h=c('ChannelConstants').getArbiterType(c('ChannelConstants').FAKE_DFF);i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercurySyncFakeDFFSender1=k;}i.prototype.sendGlobalDFF=function(){c('Arbiter').inform(h,{obj:{delta:{'class':c('MercurySyncDeltaTypes').ForcedFetch},queue:this.$MercurySyncFakeDFFSender1}});};i.prototype.sendThreadDFF=function(k,l){c('Arbiter').inform(h,{obj:{delta:{'class':c('MercurySyncDeltaTypes').ForcedFetch,threadKey:{otherUserFbId:k,threadFbId:l}},queue:this.$MercurySyncFakeDFFSender1}});};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercuryThreadInfo',['CurrentUser','MercuryIDs','MessengerThreadCannotReplyReason'],(function a(b,c,d,e,f,g){'use strict';var h={canReply:function j(k){return !!(k.is_subscribed&&(k.can_reply===undefined||k.can_reply)&&!k.has_email_participant&&!k.read_only);},getMuteSetting:function j(k){return !k.mute_until?undefined:k.mute_until;},isEmptyLocalThread:function j(k){return (c('MercuryIDs').tokenize(k.thread_id).type==='root'&&!k.timestamp);},isMuted:function j(k){return h.getMuteSetting(k)!==undefined;},areMentionsMuted:function j(k){return k.mentions_mute_mode===1;},areReactionsMuted:function j(k){return k.reactions_mute_mode===1;},isNewEmptyLocalThread:function j(k){return !!(h.isEmptyLocalThread(k)&&k.participants&&k.participants.length===0);},showComposer:function j(k){return !!(k.is_subscribed&&(k.can_reply||!k.cannot_reply_reason||k.cannot_reply_reason===c('MessengerThreadCannotReplyReason').BLOCKED)&&!k.has_email_participant&&!k.read_only);},isColdOpen:function j(k){return !!(k.is_canonical_user&&(k.message_count===0||!k.timestamp));}};function i(j){return j+'@facebook.com';}f.exports=h;}),null);
__d('MessagingGiftWrapConstants',[],(function a(b,c,d,e,f,g){'use strict';var h='gift_wrap',i='gift_unwrapped',j='valentines2016';f.exports={TAG_PREFIX:h,UNWRAPPED_TAG:i,VALENTINES_GIFT:j};}),null);
__d('MessagingGiftWrapChecker',['MercuryConfig','MercuryTagHelper','MessagingGiftWrapConstants'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderWithGiftWrap:function k(l){return !!(c('MercuryConfig').GiftWrapViewerGK&&l.tags&&i(l.tags)&&!j(l.tags));}};function i(k){return c('MercuryTagHelper').get(k,c('MessagingGiftWrapConstants').TAG_PREFIX)===c('MessagingGiftWrapConstants').VALENTINES_GIFT;}function j(k){return !!c('MercuryTagHelper').get(k,c('MessagingGiftWrapConstants').UNWRAPPED_TAG);}f.exports=h;}),null);
__d('MercuryThreads',['invariant','ChatReliabilityInstrumentation','EventEmitter','EventReminderConstants','MercuryDisplayTimeFilterMessageRenderer','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAssert','MercuryAttachment','MercuryConfig','MercuryDispatcher','MercuryGiftSnippetRenderer','MercuryGlobalActionType','MercuryIDs','MercuryLocalIDs','MercuryLoggingHelper','MercuryLogMessageType','MercuryParticipants','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercurySyncFakeDFFSender','MercuryThreadInfo','MercuryThreadInformer','MessagingGenericAdminTextType','MessagingGiftWrapChecker','MessagingTag','Set','emptyFunction','ifRequired','requireWeak','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('EventReminderConstants').GuestStates,j=new (c('EventEmitter'))(),k=c('LogHistory').getInstance('mercury_threads');function l(n){this.$MercuryThreads1=n;this.$MercuryThreads2=c('MercuryServerRequests').getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=c('MercuryThreadInformer').getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=c('MercuryIDs').getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=c('MercuryDispatcher').getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=c('MercurySyncFakeDFFSender').getForFBID(this.$MercuryThreads1);this.$MercuryThreads7=false;this.$MercuryThreads8=new (c('KeyedCallbackManager'))();this.$MercuryThreads9=new (c('Set'))();this.$MercuryThreads10=false;this.$MercuryThreads11=new (c('Set'))();this.$MercuryThreads12=new (c('Set'))();this.$MercuryThreads13();}l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};l.prototype.getThreadMetaNow=function(n){c('MercuryAssert').isThreadID(n);var o=this.$MercuryThreads8.getResource(n);if(o&&!o.participants){c('ChatReliabilityInstrumentation').logERROR('participants are null!',{thread_id:n});this.$MercuryThreads6.sendThreadDFF(null,n);return new (c('ImmutableObject'))(babelHelpers['extends']({},o,{participants:[]}));}return o;};l.prototype.getOrFetch=function(n){var o=this.getThreadMetaNow(n);if(!o&&!this.$MercuryThreads12.has(n))this.$MercuryThreads11.add(n);if(this.$MercuryThreads11.size>0&&!this.$MercuryThreads10)this.$MercuryThreads14();return o;};l.prototype.$MercuryThreads14=function(){if(this.$MercuryThreads10)return;this.$MercuryThreads10=true;c('setImmediate')(function(){this.$MercuryThreads10=false;this.$MercuryThreads11.forEach(function(n){return this.$MercuryThreads12.add(n);}.bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads11),function(n){for(var o in n)n.hasOwnProperty(o)&&this.$MercuryThreads12['delete'](o);}.bind(this));this.$MercuryThreads11.clear();}.bind(this));};l.prototype.getThreadMeta=function(n,o,p){return this.getMultiThreadMeta([n],function(q){return o(q[n]);},p);};l.prototype.getMultiThreadMeta=function(n,o,p){c('MercuryAssert').allThreadID(n);var q=this.$MercuryThreads8.executeOrEnqueue(n,o),r=this.$MercuryThreads8.getUnavailableResources(q);if(r.length){var s=[];for(var t=0;t<r.length;t++){var u=r[t],v=c('MercuryIDs').tokenize(u),w=v.type,x=v.value;if(w=='user'){var y=c('MercuryIDs').getParticipantIDFromUserID(x);this.createNewLocalThread(u,y===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,y]);}s.push(u);}if(s.length)this.$MercuryThreads2.fetchThreadData(s,p);}return q;};l.addListener=function(n,o){return j.addListener(n,o);};l.prototype.unsubscribe=function(n){this.$MercuryThreads8.unsubscribe(n);};l.prototype.getCanonicalThreadToParticipant=function(n,o,p,q){var r=c('MercuryIDs').getThreadIDFromParticipantID(n);!!r||h(0);var s=this.$MercuryThreads8.getResource(r);if(s==undefined){s=this.createNewLocalThread(r,this.$MercuryThreads4===n?[this.$MercuryThreads4]:[this.$MercuryThreads4,n],o);!q&&this.$MercuryThreads2.fetchThreadData([r],p);}return s;};l.prototype.createNewLocalThread=function(n,o,p){var q=this.$MercuryThreads8.getResource(n);if(!q){var r=c('MercuryIDs').tokenize(n),s=r.type,t=r.value;q=new (c('ImmutableObject'))({thread_id:n,participants:Array.from(o),admin_ids:[],name:'',snippet:'',snippet_sender:null,unread_count:p?p:0,message_count:0,image_src:null,timestamp:null,other_user_fbid:s==='user'?t:null,is_canonical_user:s=='user',is_canonical:this.$MercuryThreads15(o),is_subscribed:true,folder:c('MessagingTag').INBOX,is_archived:false});this.$MercuryThreads8.setResource(n,q);}return q;};l.prototype.createNewLocalThreadGenerateID=function(){var n=c('MercuryLocalIDs').generateThreadID();this.createNewLocalThread(n,[]);return n;};l.prototype.isEmptyLocalThread=function(n){var o=this.$MercuryThreads8.getResource(n);if(!o)return false;return c('MercuryThreadInfo').isEmptyLocalThread(o);};l.prototype.isNewEmptyLocalThread=function(n){var o=this.$MercuryThreads8.getResource(n);if(!o)return false;return c('MercuryThreadInfo').isNewEmptyLocalThread(o);};l.prototype.$MercuryThreads16=function(n,o){if(!n||!n.length)return;var p=new (c('Map'))(),q=new (c('Map'))(),r=new (c('Map'))(),s=[];for(var t=0;t<n.length;t++){var u=n[t],v=u.action_type;if(v==c('MercuryActionType').LOG_MESSAGE&&u.log_message_type==c('MercuryLogMessageType').SERVER_ERROR)continue;var w=!!(u.sync_id||u.is_from_iris),x=u.thread_id;c('MercuryAssert').isThreadID(x);var y=this.$MercuryThreads8.getResource(x);if(!y&&!w&&v==c('MercuryActionType').USER_GENERATED_MESSAGE){y=this.$MercuryThreads17(u);if(!y.participants){k.debug('missing_local_participants',JSON.stringify(u));c('ChatReliabilityInstrumentation').logERROR('missing_local_participants',{thread_id:x});this.$MercuryThreads6.sendThreadDFF(null,x);y=new (c('ImmutableObject'))(babelHelpers['extends']({},y,{participants:[]}));}this.$MercuryThreads8.setResource(x,y);}if(!y)continue;if(v==c('MercuryActionType').LOG_MESSAGE||v==c('MercuryActionType').USER_GENERATED_MESSAGE)w=!o;if(y.server_timestamp&&u.timestamp<=y.server_timestamp&&w)continue;if(!r.has(x))r.set(x,babelHelpers['extends']({},y));this.$MercuryThreads18(r.get(x),u,o);var z=p.get(x);if(v==c('MercuryActionType').USER_GENERATED_MESSAGE&&(!z||u.timestamp>z.timestamp))p.set(x,u);if((v==c('MercuryActionType').USER_GENERATED_MESSAGE||v==c('MercuryActionType').LOG_MESSAGE)&&!u.skip_bump_thread)if(u&&u.timestamp&&(!q.has(x)||u.timestamp>q.get(x).timestamp))q.set(x,u);}r.forEach(function(aa,ba){var ca=q.get(ba),da=p.get(ba);if(da){this.$MercuryThreads19(aa,da);}else if(ca&&ca.log_message_body){var ea=babelHelpers['extends']({},ca,{body:ca.log_message_body});this.$MercuryThreads19(aa,ea);}var fa=aa.timestamp;if(ca){if(ca.timestamp>fa)Object.assign(aa,{timestamp:ca.timestamp});var ga=aa.server_timestamp;if(!o&&ca.timestamp>ga)aa.server_timestamp=ca.timestamp;}var ha=new (c('ImmutableObject'))(aa);this.$MercuryThreads8.setResource(ba,ha);s.push(c('MercuryLoggingHelper').obfuscateThread(ha));}.bind(this),this);s.length&&this.$MercuryThreads7&&k.debug('threads_updated',JSON.stringify({threads:s}));};l.prototype.$MercuryThreads18=function(n,o,p){var q=o.action_type;if(q==c('MercuryActionType').USER_GENERATED_MESSAGE||q==c('MercuryActionType').LOG_MESSAGE){if(o.is_unread||o.skip_bump_thread)if(!(n.unread_count===0&&o.skip_bump_thread))n.unread_count++;n.message_count++;n.is_archived=false;}switch(q){case c('MercuryActionType').DELETE_THREAD:n.message_count=0;this.$MercuryThreads20(o.thread_id);break;case c('MercuryActionType').USER_GENERATED_MESSAGE:if(n.unread_count===0&&o.author===this.$MercuryThreads4&&o.timestamp>=n.last_read_timestamp)n.last_read_timestamp=o.timestamp;if(o.offline_threading_id!==o.message_id)n.last_message_timestamp=o.timestamp;this.$MercuryThreads21(n,o.author);break;case c('MercuryActionType').SEND_MESSAGE:var r=o.log_message_type;if(r==c('MercuryLogMessageType').THREAD_IMAGE){n.image_src=o.log_message_data.image?o.log_message_data.image.preview_url:null;this.$MercuryThreads22(o.thread_id);}if(r!==c('MercuryLogMessageType').SUBSCRIBE&&r!==c('MercuryLogMessageType').UNSUBSCRIBE)n.snippet_attachments=o.attachments;break;case c('MercuryActionType').LOG_MESSAGE:var r=o.log_message_type;if(r==c('MercuryLogMessageType').SUBSCRIBE){this.$MercuryThreads23(n,o.log_message_data.added_participants);this.$MercuryThreads22(o.thread_id);}else if(r==c('MercuryLogMessageType').UNSUBSCRIBE){this.$MercuryThreads24(n,o.log_message_data.removed_participants);this.$MercuryThreads22(o.thread_id);}else if(r==c('MercuryLogMessageType').THREAD_IMAGE){if(!p)n.image_src=o.log_message_data.image?o.log_message_data.image.preview_url:null;}else if(r==c('MercuryLogMessageType').THREAD_NAME){if(n.name!==o.log_message_data.name)this.$MercuryThreads22(o.thread_id);n.name=o.log_message_data.name;}else if(r===c('MercuryLogMessageType').GENERIC_ADMIN_TEXT)this.$MercuryThreads25(n,o);break;case c('MercuryActionType').CHANGE_READ_STATUS:var s=this.$MercuryThreads26(n,o,o.mark_as_read);if(s)n.last_read_timestamp=n.last_message_timestamp;var t=!n.read_only&&n.folder===c('MessagingTag').INBOX;if(s&&p)this.$MercuryThreads2.changeThreadReadStatus(n.thread_id,o.mark_as_read,o.source,n.last_read_timestamp,t,n.last_message_type);break;case c('MercuryActionType').CHANGE_ARCHIVED_STATUS:if(n.is_archived!=o.archived){n.is_archived=o.archived;this.$MercuryThreads22(o.thread_id);}break;case c('MercuryActionType').CHANGE_FOLDER:if(n.folder!=o.new_folder){n.folder=o.new_folder;this.$MercuryThreads22(o.thread_id);}break;case c('MercuryActionType').DELETE_MESSAGES:if(p){n.snippet='...';n.snippet_attachments=null;n.snippet_sender=null;this.$MercuryThreads22(o.thread_id);}else if(o.message_ids){n.message_count-=o.message_ids.length;c('ifRequired')('MercuryMessages',function(v){v=v.getForFBID(this.$MercuryThreads1);for(var w=o.message_ids,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var z;if(x){if(y>=w.length)break;z=w[y++];}else{y=w.next();if(y.done)break;z=y.value;}var aa=z,ba=v.getMessagesFromIDs([aa]),ca=ba[0];if(ca&&ca.timestamp>n.last_read_timestamp)n.unread_count=Math.max(0,n.unread_count-1);}this.$MercuryThreads22(o.thread_id);}.bind(this),c('emptyFunction'));}break;case c('MercuryActionType').UPDATE_SNIPPET:c('ifRequired')('MercuryMessages',function(v){v=v.getForFBID(this.$MercuryThreads1);var w=0,x=1,y=v.getThreadMessagesRangeNow(o.thread_id,w,x),z=y[0];if(z){n.snippet=z.body;n.snippet_attachments=z.attachments;n.snippet_sender=z.author;}else{n.snippet='...';n.snippet_attachments=null;n.snippet_sender=null;v.getThreadMessagesRange(o.thread_id,w,x,function(aa){if(aa.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:o.thread_id,action_type:c('MercuryActionType').UPDATE_SNIPPET,deleted_ids:o.deleted_ids}]});}.bind(this));}this.$MercuryThreads22(o.thread_id);}.bind(this),c('emptyFunction'));break;case c('MercuryActionType').CHANGE_MUTE_SETTINGS:if(o.hasOwnProperty('reactions_mute_mode')){n.reactions_mute_mode=o.reactions_mute_mode;}else if(o.hasOwnProperty('mentions_mute_mode')){n.mentions_mute_mode=o.mentions_mute_mode;}else n.mute_until=!o.mute_until?undefined:o.mute_until;this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').ADD_PARTICIPANTS:this.$MercuryThreads23(n,o.participants);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').CHANGE_FLAG:this.$MercuryThreads27(n,o.mark_as_flag);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').MOVE_PENDING_TO_INBOX:this.$MercuryThreads28(n);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').UPDATE_CUSTOM_LIKE:n.custom_like_icon=o.custom_like;this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').ADD_GROUP_ADMINS:n.admin_ids=n.admin_ids.concat(o.added_admin_ids.filter(function(v){return n.admin_ids.indexOf(v)===-1;}));this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').REMOVE_GROUP_ADMINS:n.admin_ids=n.admin_ids.filter(function(v){return o.removed_admin_ids.indexOf(v)===-1;});this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').JOINABLE_MODE:n.joinable_mode=o.joinable_mode;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').APPROVAL_MODE:n.approval_mode=o.approval_mode;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').APPROVAL_QUEUE:if(o.added_id&&n.approval_queue_ids&&n.approval_queue_ids.indexOf(o.added_id)===-1)n.approval_queue_ids=n.approval_queue_ids.concat(o.added_id);if(o.removed_id&&n.approval_queue_ids)n.approval_queue_ids=n.approval_queue_ids.filter(function(v){return o.removed_id!==v;});this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').IS_PIN_PROTECTED:n.is_pin_protected=o.is_pin_protected;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').UPDATE_RTC_CALL_DATA:var u=o.initiator_fbid||(n.rtc_call_data?n.rtc_call_data.initiator_fbid:undefined);n.rtc_call_data=new (c('ImmutableObject'))({call_state:o.call_state,server_info_data:o.server_info_data,initiator_fbid:u});this.$MercuryThreads22(o.thread_id);break;}};l.prototype.$MercuryThreads25=function(n,o){var p,q=this;if(o.log_message_data&&o.log_message_data.untypedData)(function(){var r=o.log_message_data.untypedData,event=n.lightweight_event;switch(o.log_message_data.message_type){case c('MessagingGenericAdminTextType').THREAD_EPHEMERAL_SEND_MODE:var s=parseInt(r.ttl,10);if(s!==null&&n.ephemeral_ttl_mode!==s){n.ephemeral_ttl_mode=s;q.$MercuryThreads22(o.thread_id);}break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_NICKNAME:var t={};for(var u in n.custom_nickname){if(u==r.participant_id&&r.nickname.trim().length==0)continue;t[u]=n.custom_nickname[u];}if(r.nickname.trim().length>0)t[r.participant_id]=r.nickname;n.custom_nickname=t;q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_ICON:c('requireWeak')('MercuryThreadActions',function(y){y.getForFBID(this.$MercuryThreads1).updateCustomLike(o.thread_id,r.thread_icon);}.bind(q));break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_THEME:var v=r.theme_color;if(v.length>0){n.custom_color='#'.concat(v.substring(2));}else n.custom_color=null;q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_CREATE:var w={};w[r.event_creator_id]=i.GOING;n.lightweight_event={track_rsvp:r.event_track_rsvp,title:r.event_title,event_time:parseInt(r.event_time,10),unified_location_name:null,event_members:w,oid:r.event_id};q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TIME:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_LOCATION:if(event)n.lightweight_event=q.$MercuryThreads29(r,event,event.event_members);q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_RSVP:if(event&&event.event_members){var x=q.$MercuryThreads30(event.event_members,r);n.lightweight_event=q.$MercuryThreads29(r,event,x);}q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_DELETE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_NOTIFY:n.lightweight_event=null;q.$MercuryThreads22(o.thread_id);break;}})();};l.prototype.$MercuryThreads30=function(n,o){var p={};for(var q in n)p[q]=n[q];p[o.guest_id]=o.guest_status;return p;};l.prototype.$MercuryThreads29=function(n,event,o){return {track_rsvp:event.track_rsvp,title:n.event_title===undefined?event.title:n.event_title,event_time:n.event_time===undefined?event.event_time:parseInt(n.event_time,10),unified_location_name:n.event_location_name===undefined?event.unified_location_name:n.event_location_name,event_members:o===undefined?event.event_members:o,oid:event.oid};};l.prototype.$MercuryThreads17=function(n){var o=c('MercuryIDs').tokenize(n.thread_id),p=o.type,q=o.value,r=p==='user',s=r||n.specific_to_list&&this.$MercuryThreads15(n.specific_to_list),t=s||r?this.$MercuryThreads31(n):n.specific_to_list;return new (c('ImmutableObject'))({thread_id:n.thread_id,participants:t,name:null,snippet:n.body,snippet_attachments:[],snippet_sender:n.author,unread_count:0,message_count:0,image_src:null,timestamp:n.timestamp,other_user_fbid:r?q:null,is_canonical_user:r,is_canonical:s,is_subscribed:true,folder:c('MessagingTag').INBOX,is_archived:false});};l.prototype.$MercuryThreads26=function(n,o,p){if(o.timestamp)this.$MercuryThreads32(n.thread_id,p,o.timestamp);if(!n||!n.thread_id)return false;if(!n.timestamp){this.$MercuryThreads9.add(n.thread_id);return false;}var q=!n.unread_count;if(p==q)return false;n.unread_count=p?0:1;this.$MercuryThreads22(n.thread_id);return true;};l.prototype.$MercuryThreads33=function(n){var o=this.$MercuryThreads8.getAllResources();for(var p in o)if(o.hasOwnProperty(p)){var q=o[p];if(q.folder==n){this.$MercuryThreads8.setResource(p,c('ImmutableObject').setProperty(q,'unread_count',0));this.$MercuryThreads22(p);}}};l.prototype.$MercuryThreads23=function(n,o){var p=new (c('Set'))(n.participants);n.participants=Array.from(n.participants||[]);o.forEach(function(q){if(!p.has(q)){n.participants.push(q);if(q===this.$MercuryThreads4){n.is_subscribed=true;n.can_reply=true;n.cannot_reply_reason=null;this.$MercuryThreads6.sendThreadDFF(undefined,n.thread_fbid);}}}.bind(this));};l.prototype.$MercuryThreads24=function(n,o){var p=new (c('Set'))(o);n.participants=n.participants.filter(function(q){return !p.has(q);});n.admin_ids=n.admin_ids.filter(function(q){return !p.has(q);});if(p.has(this.$MercuryThreads4))n.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([n.thread_id]);};l.prototype.$MercuryThreads21=function(n,o){if(!n.participants){var p=JSON.stringify({thread_info:n,participant:o});k.debug('missing_participants',p);return;}var q=n.participants.indexOf(o);if(q>0)n.participants=[o].concat(n.participants.slice(0,q),n.participants.slice(q+1));};l.prototype.$MercuryThreads19=function(n,o){var p=o.body,q=o.subject,r='';if(q){q=q.toLowerCase();if(p.slice(0,q.length).toLowerCase()==q){r=p;}else if(p){r=q+' \u00B7 '+p;}else r=q;}else r=p;if(o.is_filtered_content)r=c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(o);if(c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(o)){var s=o.author,t=s==this.$MercuryThreads4,u=null;if(!t){u=n.custom_nickname&&n.custom_nickname[c('MercuryIDs').getUserIDFromParticipantID(s)];if(!u){var v=c('MercuryParticipants').getNow(s);if(v!=null)u=v.short_name;}}r=c('MercuryGiftSnippetRenderer').renderText(t,u);}n.snippet=r;if(o.raw_attachments&&o.raw_attachments.length>0){var w=c('MercuryAttachment').convertRaw(o.raw_attachments);n.snippet_attachments=w;}else n.snippet_attachments=o.attachments;if(o.log_message_type){n.snippet_sender=null;}else n.snippet_sender=o.author;};l.prototype.$MercuryThreads27=function(n,o){n.page_thread_info=babelHelpers['extends']({},n.page_thread_info,{flagged:o});};l.prototype.$MercuryThreads28=function(n){if(n.folder!==c('MessagingTag').PENDING)return;n.folder=c('MessagingTag').INBOX;};l.prototype.$MercuryThreads15=function(n){return n.filter(function(o){return o!=this.$MercuryThreads4;}.bind(this)).length<=1;};l.prototype.$MercuryThreads13=function(){this.$MercuryThreads5.subscribe('invalidate-thread-state',function(n,o){return this.$MercuryThreads34(o);}.bind(this));this.$MercuryThreads5.subscribe('invalidate-global-state',function(n,o){return this.$MercuryThreads35();}.bind(this));this.$MercuryThreads5.subscribe('update-threads',function(n,o){var p=(o.actions||[]).filter(function(q){return q.thread_id;});if(o.threads&&o.payload_source==c('MercuryPayloadSource').SERVER_FETCH_THREAD_INFO)o.threads.forEach(function(q){var r=q.thread_id;if(this.$MercuryThreads9.has(r)){this.$MercuryThreads9['delete'](r);if(q.unread_count)this.$MercuryThreads2.changeThreadReadStatus(q.thread_id,true);}}.bind(this));this.$MercuryThreads36(o.threads);this.$MercuryThreads16(p,o.from_client);o.threads&&o.threads.forEach(function(q){this.$MercuryThreads22(q.thread_id);}.bind(this));if(o.global_actions)o.global_actions.forEach(function(q){if(q.action_type==c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryThreads33(q.folder);}.bind(this));if(this.$MercuryThreads7){this.$MercuryThreads7=false;j.emit('change');}}.bind(this));};l.prototype.$MercuryThreads36=function(n){if(!n||!n.length)return;var o={},p=[];n.forEach(function(q){var r=new (c('ImmutableObject'))(q);o[q.thread_id]=r;p.push(c('MercuryLoggingHelper').obfuscateThread(r));});p.length&&k.debug('threads_added',JSON.stringify({threads:p}));this.$MercuryThreads8.addResourcesAndExecute(o);};l.prototype.$MercuryThreads22=function(n){this.$MercuryThreads7=true;this.$MercuryThreads3.updatedThread(n);};l.prototype.$MercuryThreads20=function(n){this.$MercuryThreads7=true;this.$MercuryThreads3.deletedThread(n);};l.prototype.$MercuryThreads32=function(n,o,p){this.$MercuryThreads7=true;this.$MercuryThreads3.changedThreadReadState(n,o,p);};l.prototype.$MercuryThreads34=function(n){this.$MercuryThreads8.setResource(n,undefined);};l.prototype.$MercuryThreads35=function(){this.$MercuryThreads7=false;this.$MercuryThreads8=new (c('KeyedCallbackManager'))();this.$MercuryThreads9=new (c('Set'))();this.$MercuryThreads10=false;this.$MercuryThreads11=new (c('Set'))();this.$MercuryThreads12=new (c('Set'))();};l.prototype.$MercuryThreads31=function(n){if(n.specific_to_list)return n.specific_to_list;var o=c('MercuryIDs').tokenize(n.thread_id),p=o.type,q=o.value;if(!q||p!=='user')return [this.$MercuryThreads4];return [c('MercuryIDs').getParticipantIDFromUserID(q),this.$MercuryThreads4];};var m=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('MessengerStateProcessor',['MercuryAPIArgsSource','MercuryIDs','MercuryParticipantTypes','MercuryParticipants','MercuryThreadIDMap','MercuryThreads','MercuryVanityIDMap','MessengerURIConstants'],(function a(b,c,d,e,f,g){'use strict';var h={preprocess:function j(k){var l=k.activeThreadID;if(l){var m=c('MercuryIDs').getUserIDFromThreadID(l),n=m&&c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(m));if(n&&n.type!==c('MercuryParticipantTypes').EVENT){k.threadKey=n.vanity||m;}else if(m&&!n){var o=c('MercuryIDs').getParticipantIDFromUserID(m);k.threadKey=c('MercuryVanityIDMap').hasID(o)?c('MercuryVanityIDMap').getVanity(o):m;}else{var p=c('MercuryThreadIDMap').get(),q=p.getServerIDFromClientIDNow(l);k.threadKey=q||c('MercuryIDs').tokenize(l).value;}}delete k.activeThreadID;return k;},postprocess:function j(k){var l=c('MercuryThreadIDMap').get(),m=c('MercuryThreads').get(),n=i(k.threadKey),o=void 0;o=c('MercuryIDs').isValid(n)?n:l.getClientIDFromServerIDNow(n);if(!o){var p=c('MercuryParticipants').getIDFromVanityOrFBID(n),q=p&&m.getCanonicalThreadToParticipant(p,null,c('MercuryAPIArgsSource').MESSENGER);if(q)o=q.thread_id;}if(o){k.activeThreadID=o;k.serverThreadID=l.getServerIDFromClientIDNow(o);}delete k.threadKey;return k;},supportInboxPostprocess:function j(k){if(k.threadKey)k.activeThreadID=c('MercuryIDs').getThreadIDFromSupportInboxItemID(k.threadKey);delete k.threadKey;return k;}};function i(j){if(!j)return null;return j.startsWith(c('MessengerURIConstants').GROUP_PREFIX)?j.substr(c('MessengerURIConstants').GROUP_PREFIX.length):j;}f.exports=h;}),null);
__d('MessengerURISerializer',['CurrentEnvironment','MercuryFilters','MessagingTag','MessengerStateProcessor','MessengerURIConstants','MessengerView','URI','WWWBase'],(function a(b,c,d,e,f,g){'use strict';var h='/?$',i=function m(n,o){n.setPath(c('CurrentEnvironment').facebookdotcom?c('MessengerURIConstants').FACEBOOK_PREFIX+o:o);},j=function m(n,o){var p=n.getPath();if(c('CurrentEnvironment').facebookdotcom&&!p.startsWith(c('MessengerURIConstants').FACEBOOK_PREFIX))o=c('MessengerURIConstants').FACEBOOK_PREFIX+o;n.setPath(n.getPath()+o);},k={serialize:function m(n){var o=new (c('URI'))(c('WWWBase').uri);n=c('MessengerStateProcessor').preprocess(n);switch(n.masterView){case c('MessengerView').MASTER.GROUPS:i(o,c('MessengerURIConstants').GROUPS_PATH);break;case c('MessengerView').MASTER.PEOPLE:i(o,c('MessengerURIConstants').PEOPLE_PATH);break;case c('MessengerView').MASTER.SUPPORT:i(o,c('MessengerURIConstants').SUPPORT_PATH);break;}switch(n.folder){case c('MessagingTag').OTHER:i(o,c('MessengerURIConstants').FILTERED_REQUESTS_PATH);break;case c('MessagingTag').ACTION_ARCHIVED:i(o,c('MessengerURIConstants').ARCHIVED_PATH);break;case c('MessagingTag').PENDING:i(o,c('MessengerURIConstants').MESSAGE_REQUESTS_PATH);break;}if(n.detailView===c('MessengerView').DETAIL.COMPOSE){j(o,c('MessengerURIConstants').COMPOSE_SUBPATH);}else if(n.threadKey){j(o,c('MessengerURIConstants').THREAD_PREFIX+n.threadKey);}else j(o,'');if(n.extraQueryParms)o.addQueryData(n.extraQueryParams);if(c('MercuryFilters').isSupportedFilter(n.filter))o.addQueryData({filter:n.filter});if(n.query!=null){var p;o.addQueryData((p={},p[n.masterView===c('MessengerView').MASTER.SEARCH?'qa':'q']=n.query,p));}if(n.mid)o.addQueryData({mid:n.mid});return o;},deserialize:function m(n){var o={},p=n.getPath();if(c('CurrentEnvironment').facebookdotcom&&!p.startsWith(c('MessengerURIConstants').FACEBOOK_PREFIX))o.notMessenger=true;var q=p.replace(c('MessengerURIConstants').FACEBOOK_PREFIX,''),r=n.getQueryData(),s=r.filter,t=r.mid,u=r.q,v=r.qa,w=babelHelpers.objectWithoutProperties(r,['filter','mid','q','qa']);if(q.match('^'+c('MessengerURIConstants').GROUPS_PATH)){o.masterView=c('MessengerView').MASTER.GROUPS;}else if(q.match('^'+c('MessengerURIConstants').PEOPLE_PATH)){o.masterView=c('MessengerView').MASTER.PEOPLE;}else if(q.match('^'+c('MessengerURIConstants').SUPPORT_PATH)){o.masterView=c('MessengerView').MASTER.SUPPORT;}else if(v){o.masterView=c('MessengerView').MASTER.SEARCH;}else o.masterView=c('MessengerView').MASTER.RECENT;if(q.match('^'+c('MessengerURIConstants').FILTERED_REQUESTS_PATH)){o.folder=c('MessagingTag').OTHER;}else if(q.match('^'+c('MessengerURIConstants').ARCHIVED_PATH)){o.folder=c('MessagingTag').ACTION_ARCHIVED;}else if(q.match('^'+c('MessengerURIConstants').MESSAGE_REQUESTS_PATH)){o.folder=c('MessagingTag').PENDING;}else o.folder=c('MessagingTag').INBOX;if(q.match(c('MessengerURIConstants').COMPOSE_SUBPATH+h)){o.detailView=c('MessengerView').DETAIL.COMPOSE;}else{var x=l(q);if(x){o.threadKey=x;o.detailView=c('MessengerView').DETAIL.THREAD;}}if(c('MercuryFilters').isSupportedFilter(s)){o.filter=s;}else o.filter=c('MercuryFilters').ALL;o.mid=t;o.query=v||u;o.extraQueryParams=w;if(o.masterView===c('MessengerView').MASTER.SUPPORT)return c('MessengerStateProcessor').supportInboxPostprocess(o);return c('MessengerStateProcessor').postprocess(o);}};function l(m){var n=m.match(c('MessengerURIConstants').THREAD_PREFIX+'([^/]+)'+h);return n&&n[1];}f.exports=k;}),null);
__d('MessengerActions',['invariant','MercuryIDs','MessengerDispatcher','MessengerURISerializer','MercuryTypeaheadConstants','MessengerView','URI','goURI','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('keyMirror')({HIDE_DIALOG:null,REPLACE_STATE:null,SELECT_THREAD:null,SHOW_DIALOG:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null}),j={Types:i,changeDetailView:function m(n){l(function(o){if(o.detailView!==n)return {detailView:n};});},changeMasterView:function m(n){l(function(o){if(o.masterView!==n){var p={masterView:n};if(o.masterView===c('MessengerView').MASTER.SEARCH)p.query=undefined;return p;}});},selectThread:function m(n,o){if(o===c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){!!n||h(0);var p=c('MercuryIDs').getUserIDFromThreadID(n);!!p||h(0);var q=new (c('URI'))(),r=q.getQualifiedURI().getSubdomain();q.setDomain('facebook.com').setSubdomain(r).setPath('/'+p).setProtocol('https');window.open(q,'_blank');return;}c('MessengerDispatcher').dispatch({type:i.SELECT_THREAD,threadID:n});l(function(s){if(s.activeThreadID!==n)return {activeThreadID:n,detailView:c('MessengerView').DETAIL.THREAD,mid:null};});},changeState:function m(n){c('MessengerDispatcher').dispatch({type:i.REPLACE_STATE,nextState:n});},showDialog:function m(n,o){c('MessengerDispatcher').dispatch({type:j.Types.SHOW_DIALOG,dialogClass:n,dialogProps:o});},changeMDotMeReferral:function m(){var n=arguments.length<=0||arguments[0]===undefined?null:arguments[0],o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c('MessengerDispatcher').dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:n,refThreadID:o});},changeThreadTag:function m(){var n=arguments.length<=0||arguments[0]===undefined?null:arguments[0],o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c('MessengerDispatcher').dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:n,threadID:o});},hideDialog:function m(n){c('MessengerDispatcher').dispatch({type:j.Types.HIDE_DIALOG,dialogClass:n});},changeFolder:function m(n){l(function(o){if(o.folder!==n)return {folder:n};});},changeFilter:function m(n){l(function(o){if(o.filter!==n)return {filter:n};});},changeQuery:function m(n){l(function(o){if(o.query!==n)return {query:n};});},changeQueryAll:function m(n){var o=!!n;l(function(p){if(p.queryAll!==n)return {query:n,masterView:c('MessengerView').MASTER.SEARCH};});},changeMid:function m(n){l(function(o){if(o.mid!==n)return {mid:n};});}};function k(m,n){return m.detailView==null;}function l(m){var n=c('MessengerURISerializer').deserialize(new (c('URI'))(window.location.href)),o=m(n),p=k(n,o);if(o)c('goURI')(c('MessengerURISerializer').serialize(Object.assign(n,o)),false,p);}f.exports=j;}),null);
__d('MNCommerceActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOTS_MENU:{SHOW:null,HIDE:null,LOADED:null,VISIBILITY_LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h;}),null);
__d('MessengerSpinner.react',['cx','fbt','ix','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j("86853"),o=j("86857"),p=j("86854"),q=24,r=32;k=babelHelpers.inherits(s,c('React').PureComponent);l=k&&k.prototype;s.prototype.render=function(){return (c('React').createElement(c('Image.react'),{'aria-label':i._("\u0110ang t\u1ea3i..."),'aria-busy':true,className:c('joinClasses')(this.props.className,"_3u55 _3qh2"),height:this.props.size,src:this.$MessengerSpinner1(),width:this.props.size}));};s.prototype.$MessengerSpinner1=function(){return this.props.size===q?this.props.color==='blue'?n:o:p;};function s(){k.apply(this,arguments);}s.propTypes={color:m.oneOf(['blue','grey']),size:m.oneOf([q,r])};s.defaultProps={color:'blue',size:q};s.Sizes={LARGE:r,MEDIUM:q};f.exports=s;}),null);
__d('FBRTCStruct',[],(function a(b,c,d,e,f,g){var h=function j(k,l,m){var n,o;if(typeof k=='string'||k instanceof String){o=k;n=k;}else for(var p in k)if(k.hasOwnProperty(p))if(p==='index'){m=k[p];}else{o=p;n=k[p];}l[o]=m;l.strNames[m]=n;};function i(j){'use strict';this.strNames=[];for(var k=0;k<j.length;k++)h(j[k],this,k);}f.exports=i;}),null);
__d('FBRTCConstants',['FBRTCStruct','keyMirror'],(function a(b,c,d,e,f,g){var h={OFFER:'offer',ANSWER:'answer',ICE_CANDIDATE:'ice_candidate',OK:'ok',PING:'ping',PING_ACK:'ping_ack',HANGUP:'hang_up',OTHER_DISMISS:'other_dismiss',MSG_ACK:'msg_ack',PRANSWER:'pranswer',ICERESTART_OFFER:'icerestart_offer',ICERESTART_ANSWER:'icerestart_answer',PCRESTART_OFFER:'pcrestart_offer',PCRESTART_ANSWER:'pcrestart_answer',SDP_UPDATE:'sdp_update',OFFER_ACK:'offer_ack',OFFER_NACK:'offer_nack',ANSWER_ACK:'answer_ack',SET_VIDEO:'set_video',VIDEO_REQUEST:'video_request',ACK:'ack'},i={CHILD_WINDOW_READY:'rtc_child_window_ready',CHILD_WINDOW_START_CALL:'rtc_child_window_start_call',CHILD_WINDOW_MESSAGE:'rtc_child_window_message'},j={LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5},k={AUDIO_ONLY:'audio_only',AUDIO_VIDEO:'audio_video',SCREEN_CONTENT:'screen'},l=c('keyMirror')({NO_VIDEO:null,LQ_VIDEO:null,SD_VIDEO:null,HD_VIDEO:null,FHD_VIDEO:null,CUSTOM_VIDEO:null}),m=new (c('FBRTCStruct'))([{IGNORE_CALL:'IgnoreCall'},{HANGUP_CALL:'HangupCall'},{IN_ANOTHER_CALL:'InAnotherCall'},{ACCEPT_AFTER_HANGUP:'CallEndAcceptAfterHangUp'},{NO_ANSWER_TIMEOUT:'NoAnswerTimeout'},{INCOMING_TIMEOUT:'IncomingTimeout'},{OTHER_INSTANCE_HANDLED:'OtherInstanceHandled'},{SIGNALING_MESSAGE_FAILED:'SignalingMessageFailed'},{CONNECTION_DROPPED:'ConnectionDropped'},{CLIENT_INTERRUPTED:'ClientInterrupted'},{WEBRTC_ERROR:'WebRTCError'},{CLIENT_ERROR:'ClientError'},{NO_PERMISSION:'NoPermission'},{OTHER_NOT_CAPABLE:'OtherNotCapable'},{NO_UI_ERROR:'NoUIShown'},{UNSUPPORTED_VERSION:'VersionUnsupported'},{CALLER_NOT_VISIBLE:'CallerNotVisible'},{CARRIER_BLOCKED:'CarrierBlocked'},{OTHER_CARRIER_BLOCKED:'OtherCarrierBlocked'}]),n={REMOTE_PEER_HANGUP:'CollabRemotePeerHangup',REMOTE_PEER_REJECT:'CollabRemotePeerReject',CLOSED_BY_MCU:'CollabClosedByMcu',CLOSED_AS_STALE:'CollabClosedAsStale',CALL_INITIALIZATION_FAILED:'CollabCallInitializationFailed',SIP_CONNECTION_INITIALIZATION_FAILED:'CollabSipConnectionInitializationFailed',LOST_MCU_CONNECTION:'CollabLostMcuConnection',MCU_NO_AUDIO_STREAM:'CollabMcuNoAudioStream',MCU_INVALID_STREAM_CONFIGURATION:'CollabMcuInvalidStreamConfiguration',LOST_MCU_THRIFT_CONNECTION:'CollabLostMcuThriftConnection',LOST_SIP_ADAPTER_THRIFT_CONNECTION:'CollabLostSipAdapterThriftConnection',UNKNOWN:'CollabUnknown'},o={TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10},p={ONE_HOUR:'1hour',UNTIL_EIGHT_AM:'8am',ALWAYS:'always'},q=c('keyMirror')({VIDEO:null,AUDIO:null,SCREEN_SHARE:null}),r={MULTIWAY:'multiway',P2P:'p2p'},s={NEW:'new',CHECKING:'checking',CONNECTED:'connected',completed:'completed',FAILED:'failed',DISCONNECTED:'disconnected',CLOSED:'closed'},t={PayloadType:h,ChildWindowMessageType:i,UploadLogLevel:j,StreamType:k,VideoQuality:l,CallEndReason:m,CollabCallEndSubreason:n,UIEventType:o,CallBlockingConstants:p,IncomingCallDialogTypes:q,SignalingProtocol:r,IceConnectionState:s,convertFromUploadLogLevel:function u(v){switch(v){case j.LL_DEBUG:return 'd';case j.LL_BASIC:return 'b';case j.LL_WARNING:return 'w';case j.LL_INFO:return 'i';case j.LL_VERBOSE:return 'v';case j.LL_NONE:default:return null;}},convertToUploadLogLevel:function u(v){switch(v){case 'd':return j.LL_DEBUG;case 'b':return j.LL_BASIC;case 'w':return j.LL_WARNING;case 'i':return j.LL_INFO;case 'v':return j.LL_VERBOSE;default:return j.LL_NONE;}},uploadLogLevelString:function u(v){switch(v){case j.LL_BASIC:return 'basic';case j.LL_DEBUG:return 'debug';case j.LL_WARNING:return 'warning';case j.LL_INFO:return 'info';case j.LL_VERBOSE:return 'verbose';default:return '';}},endCallReasonFromString:function u(v){return m.strNames.indexOf(v);},callEndReasonString:function u(v){if(v<0||v>m.strNames.length)return 'Unknown';return m.strNames[v];},fullCallEndReasonString:function u(v,w){return this.callEndReasonString(v)+'_'+(w?'remote':'local');}};f.exports=t;}),null);
__d('FBRTCLogger',['Log','LogHistory','MarauderLogger','formatDate','pageID'],(function a(b,c,d,e,f,g){var h='webrtc',i='sent_message',j='received_message',k='send_succeeded',l='send_failed',m='info',n='call_action',o='client_event',p='client_error',q='type',r='msg_id',s='ack_msg_id',t='call_id',u='from',v='to',w='content',x='tag',y='peer_id',z='error_code',aa='trigger',ba='endcallstats',ca=null;da.getInstance=function(){'use strict';if(!ca)ca=new da();return ca;};function da(){'use strict';this.$FBRTCLogger1=c('LogHistory').getInstance(h);}da.prototype.logToConsole=function(ea){'use strict';var fa='Console';this.$FBRTCLogger2(null,null,fa,ea);this.$FBRTCLogger1.log(fa,ea);};da.prototype.logReceivedMessage=function(ea,fa,ga){'use strict';var ha={};ha[u]=ea;ha[t]=fa;ha[q]=ga.type;ha[r]=ga.msg_id;if(ga.sdp)ha[w]=ga.sdp;if(ga.ack_id)ha[s]=ga.ack_id;this.$FBRTCLogger3(j,ha);this.$FBRTCLogger2(ea,fa,'Received',ga.type+', '+ga.msg_id);};da.prototype.logSentMessage=function(ea,fa,ga){'use strict';var ha={};ha[v]=ea;ha[t]=fa;ha[q]=ga.type;ha[r]=ga.msg_id;if(ga.sdp)ha[w]=ga.sdp;if(ga.ack_id)ha[s]=ga.ack_id;this.$FBRTCLogger3(i,ha);this.$FBRTCLogger2(ea,fa,'Sent',ga.type+', '+ga.msg_id);};da.prototype.logSentMessageSuccess=function(ea,fa,ga,ha){'use strict';var ia={};ia[y]=ea;ia[t]=fa;ia[q]=ga;ia[r]=ha;this.$FBRTCLogger3(k,ia);};da.prototype.logSentMessageFailure=function(ea,fa,ga,ha,ia){'use strict';var ja={};ja[y]=ea;ja[t]=fa;ja[q]=ga;ja[r]=ha;ja[z]=ia;this.$FBRTCLogger3(l,ja);this.$FBRTCLogger2(ea,fa,'Send Failed',ga+', '+ia);};da.prototype.logCallAction=function(ea,fa,ga,ha,ia){'use strict';var ja={};ja[y]=ea;ja[t]=fa;ja[n]=ga;ja[w]=ha;if(ia)ja[aa]=ia;this.$FBRTCLogger3(n,ja);this.$FBRTCLogger2(ea,fa,'CallAction',ga+', '+ha);};da.prototype.logEvent=function(ea,fa,event){'use strict';var ga={};ga[y]=ea;ga[t]=fa;ga[w]=event;this.$FBRTCLogger3(o,ga);this.$FBRTCLogger2(ea,fa,'Event',event);};da.prototype.logInfo=function(ea,fa,ga){'use strict';var ha={};ha[y]=ea;ha[t]=fa;ha[w]=ga;this.$FBRTCLogger3(m,ha);this.$FBRTCLogger2(ea,fa,'Info',ga);};da.prototype.logError=function(ea,fa,ga){'use strict';var ha={};ha[y]=ea;ha[t]=fa;ha[w]=ga;this.$FBRTCLogger3(p,ha);this.$FBRTCLogger2(ea,fa,'Error',ga);};da.prototype.logErrorWithoutID=function(ea){'use strict';this.logError(null,null,ea);};da.prototype.logEndCallSummary=function(ea){'use strict';if(!ea)return;var fa={};fa[y]=ea.peerID;fa[t]=ea.callID;fa[x]=ba;fa[w]=ea.toString();var ga=ea.getExtraInfo();for(var ha in ga)if(ga.hasOwnProperty(ha))fa[ha]=ga[ha];this.$FBRTCLogger3(m,fa);this.$FBRTCLogger2(ea.peerID,ea.callID,'Call Summary',fa);};da.prototype.$FBRTCLogger3=function(ea,fa){'use strict';fa.page_id=c('pageID');this.$FBRTCLogger1.log(ea,fa);c('MarauderLogger').log(ea,h,fa);};da.prototype.$FBRTCLogger2=function(ea,fa,ga,ha){'use strict';};da.CallAction={START_CALL:'start_call',RECEIVED_CALL:'received_call',ANSWER_CALL:'answer_call',END_CALL:'end_call',DENIED_PERMISSION:'denied_permission',SET_MUTE:'set_mute',SET_VIDEO_ON:'set_video_on',SET_SELF_VIEW_ON:'set_self_view_on',SET_FULLSCREEN_ON:'set_fullscreen_on',START_SKYPE:'start_skype',TRY_NEW:'try_new',OPEN_POPUP:'open_popup',POPUP_OPENED:'popup_opened',AUTO_DISABLE_VIDEO:'auto_disable_video',FAILED_GETTING_URI:'failed_getting_uri',OLD_URI:'old_uri',USER_SETTINGS_CHANGED:'user_settings_changed'};da.Trigger={ADMIN_MESSAGE:'admin_message',CHAT_TAB_ICON:'chat_tab_icon',CHAT_TAB_ICON_TOUR:'chat_tab_icon_tour',CHAT_TAB_VOICE_ICON:'chat_tab_voice_icon',SKYPE_DEPRECATION_DIALOG:'skype_deprecation_dialog',REDIAL_BUTTON:'redial_button',RETURN_CALL:'return_call',WEB_MESSENGER:'web_messenger',POPUP_CALL_START_BUTTON:'popup_start_call_button',TIMELINE_PROFILE:'timeline_profile',UNKNOWN:'unknown',RESET_CALL:'install_screen_sharing_ext_dialog',MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:'multiway_chat_tab_sheet_join_call_button',MULTIWAY_POPUP_START_CALL_BUTTON:'multiway_popup_start_call_button',MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:'multiway_thread_header_audio_button',MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:'multiway_thread_header_video_button',MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:'multiway_thread_header_join_audio_call_audio_button',MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:'multiway_thread_header_join_audio_call_video_button',MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:'multiway_thread_header_join_video_call_audio_button',MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:'multiway_thread_header_join_video_call_video_button',MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:'multiway_thread_list_join_call_button'};da.Key={DEVICE_INFO:'device_info',RATING:'rating5',RATING_SHOWN:'rating_shown',SURVEY_CHOICE:'survey_choice',SURVEY_DETAILS:'survey_details',SURVEY_SHOWN:'survey_shown',INITIATED_BY_PAGE_ID:'initiated_by_page_id',PEER_IS_MOBILE:'peer_is_mobile'};f.exports=da;}),null);
__d('FBRTCLocalMessageQueue',['CacheStorage','FBRTCLogger','Map','RTCConfig'],(function a(b,c,d,e,f,g){var h='localstorage',i='RTC_',j='offer',k='offer_msg',l='data_',m=30*1000,n=15*1000,o=500,p=new (c('Map'))();function q(){'use strict';this.$FBRTCLocalMessageQueue1=c('FBRTCLogger').getInstance();}q.prototype.enqueueOffer=function(r,s){'use strict';var t=this.$FBRTCLocalMessageQueue2(r,k);this.$FBRTCLocalMessageQueue3(t,j,s);};q.prototype.getOffer=function(r){'use strict';var s=this.$FBRTCLocalMessageQueue2(r,k);return this.$FBRTCLocalMessageQueue4(s,j);};q.prototype.removeOffer=function(r){'use strict';var s=this.$FBRTCLocalMessageQueue2(r,k);s.remove(j);};q.prototype.enqueueMessage=function(r,s,t,u){'use strict';var v=l+t.toString(),w=p.get(r)||new (c('Map'))();w.set(v,u);p.set(r,w);this.$FBRTCLocalMessageQueue1.logToConsole('Queued '+v);};q.prototype.drainQueue=function(r,s){'use strict';var t=p.get(r)||new (c('Map'))(),u,v;for(var w=t,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var z;if(x){if(y>=w.length)break;z=w[y++];}else{y=w.next();if(y.done)break;z=y.value;}var aa=z,u=aa[0],v=aa[1];void u;s(v);}p.set(r,new (c('Map'))());};q.prototype.enableDequeuing=function(r,s,t,u){'use strict';if(u===undefined)u=n;this.$FBRTCLocalMessageQueue5(r,s,t,u);};q.prototype.$FBRTCLocalMessageQueue5=function(r,s,t,u){'use strict';var v=this.$FBRTCLocalMessageQueue2(r,s),w=v.keys(),x=w.length;for(var y=0;y<x;y++){var z=this.$FBRTCLocalMessageQueue6(v,w[y]);if(z&&t)t(z);}this.$FBRTCLocalMessageQueue1.logToConsole('Dequeued '+x+' ('+r+') with '+u+' left)');if(u>0){u-=o;setTimeout(function(){this.$FBRTCLocalMessageQueue5(r,s,t,u);}.bind(this),o);}};q.prototype.$FBRTCLocalMessageQueue3=function(r,s,t){'use strict';var u={__t:Date.now(),__d:t};r.set(s,u);};q.prototype.$FBRTCLocalMessageQueue4=function(r,s){'use strict';var t=r.get(s);if(t&&this.$FBRTCLocalMessageQueue7(t)){return t.__d;}else if(t)r.remove(s);return null;};q.prototype.$FBRTCLocalMessageQueue6=function(r,s){'use strict';var t=this.$FBRTCLocalMessageQueue4(r,s);if(t!==null){r.remove(s);return t;}return null;};q.prototype.$FBRTCLocalMessageQueue7=function(r){'use strict';return Date.now()-r.__t<m;};q.prototype.$FBRTCLocalMessageQueue2=function(r,s){'use strict';return new (c('CacheStorage'))(h,''+i+r+'_'+s+'_');};f.exports=q;}),null);
__d('FBRTCCallControlActions',['FBRTCDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null}),i={Types:h,hangUp:function j(){c('FBRTCDispatcher').dispatch({type:h.HANG_UP});},toggleMuteAudio:function j(){c('FBRTCDispatcher').dispatch({type:h.TOGGLE_MUTE_AUDIO});},toggleMuteVideo:function j(){c('FBRTCDispatcher').dispatch({type:h.TOGGLE_MUTE_VIDEO});},toggleFullScreen:function j(){c('FBRTCDispatcher').dispatch({type:h.TOGGLE_FULL_SCREEN});},toggleSelfView:function j(){c('FBRTCDispatcher').dispatch({type:h.TOGGLE_SELF_VIEW});},showSettings:function j(){c('FBRTCDispatcher').dispatch({type:h.SHOW_SETTINGS});},toggleScreenSharing:function j(){c('FBRTCDispatcher').dispatch({type:h.TOGGLE_SCREEN_SHARING});},startCall:function j(){c('FBRTCDispatcher').dispatch({type:h.START_CALL});},openScreenInNewWindow:function j(){c('FBRTCDispatcher').dispatch({type:h.OPEN_SCREEN_IN_NEW});},receivedSignalingMessage:function j(k){c('FBRTCDispatcher').dispatch({type:h.RECEIVED_SIGNALING_MESSAGE,message_type:k.msgType,message:k});},acceptEscalation:function j(){c('FBRTCDispatcher').dispatch({type:h.ACCEPT_ESCALATION});},declineEscalation:function j(){c('FBRTCDispatcher').dispatch({type:h.DECLINE_ESCALATION});},resetCall:function j(k){c('FBRTCDispatcher').dispatch({type:h.RESET_CALL,trigger:k});},redialCall:function j(){c('FBRTCDispatcher').dispatch({type:h.REDIAL_CALL});},parentWindowStartCall:function j(){c('FBRTCDispatcher').dispatch({type:h.PARENT_WINDOW_START_CALL});}};f.exports=i;}),null);
__d('FBRTCMessageListener',['invariant','Arbiter','ChannelConstants','FBRTCConstants','FBRTCCallControlActions','FBRTCLocalMessageQueue','FBRTCSupport','RTCConfig','guid','mixInEventEmitter'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('FBRTCConstants').ChildWindowMessageType,j=45*1000,k=[],l=null,m=null,n=null,o=null,p=null,q=false,r=null,s=void 0,t={init:function u(v,w){if(q)return;q=true;c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('webrtc'),function(y,z){this._onMessage(z.obj);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('webrtc_offer'),function(y,z){this._onMessage(z.obj);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('webrtc_offerack'),function(y,z){this._onMessage(z.obj);}.bind(this));if(c('RTCConfig').RtcConferencingGK)c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('rtc_multi_json'),function(y,z){this._onMultiwayMessage(z.obj);}.bind(this));this._localMessageQueue=new (c('FBRTCLocalMessageQueue'))();if(c('RTCConfig').PassMessagesBetweenWindowsGK){if(c('FBRTCSupport').isWebrtcSupported()&&window.addEventListener){var x=v?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener('message',x,false);}if(v)this._connectToParentWindow(w);}},setParentWindowNonce:function u(v){o=v;},generateNewNonce:function u(){p=c('guid')();return p;},setMultiwayMessageHandler:function u(v,w){!r||h(0);r=w?v.bind(w):v;},_onMultiwayMessage:function u(v){this.emit('multiwayMessageReceived',v);if(r)r(v);},setMessageHandler:function u(v,w){!l||h(0);l=w?v.bind(w):v;while(k.length)l(k.shift());},removeMessageHandler:function u(){l=null;},setParentWindowStartCallHandler:function u(v){s=v;return function(){return s=null;};},_onMessage:function u(v){this.emit('messageReceived',v);if(l){l(v);}else k.push(v);this._passMessageToChildWindow(v);},_connectToParentWindow:function u(v){if(window.opener&&window.opener.postMessage){var w={type:i.CHILD_WINDOW_READY,nonce:o,childNonce:this.generateNewNonce(),peerID:v};window.opener.postMessage(w,window.location.origin);}},_verifyWindowMessage:function u(event){return event.origin===window.location.origin&&event.data&&p&&event.data.nonce===p;},_handleWindowMessageToParent:function u(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_READY){this.setParentWindowNonce(event.data.childNonce);this._setChildWindow(event.source);this._replayQueuedMessagesToChild(event.data.peerID,m);}},_handleWindowMessageToChild:function u(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_MESSAGE)this._onMessage(event.data.message);if(event.data.type===i.CHILD_WINDOW_START_CALL)if(s){s();}else c('FBRTCCallControlActions').parentWindowStartCall();},_replayQueuedMessagesToChild:function u(v,w){this._localMessageQueue.drainQueue(v,function(x){var y={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:x};w.postMessage(y,window.location.origin);});},_setChildWindow:function u(v){m=v;clearTimeout(n);n=setTimeout(function(){m=null;},j);this._startCallInChildWindow();this.generateNewNonce();},_passMessageToChildWindow:function u(v){if(m){var w={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:v};m.postMessage(w,window.location.origin);}},_startCallInChildWindow:function u(){if(m){var v={type:i.CHILD_WINDOW_START_CALL,nonce:o};m.postMessage(v,window.location.origin);}}};c('mixInEventEmitter')(t,{messageReceived:true,multiwayMessageReceived:true});f.exports=t;}),null);
__d('MercuryFolders',['MercuryFoldersConfig','MessagingTag'],(function a(b,c,d,e,f,g){var h=[c('MessagingTag').INBOX,c('MessagingTag').PENDING,c('MessagingTag').OTHER,c('MessagingTag').ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c('MessagingTag').PENDING){return !c('MercuryFoldersConfig').hide_message_filtered;}else if(k===c('MessagingTag').OTHER)return !c('MercuryFoldersConfig').hide_message_requests;return true;}).concat();},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c('MessagingTag').ACTION_ARCHIVED;return l;}};f.exports=i;}),null);
__d('MercuryUnreadState',['invariant','MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonProvider','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i=(c('MercuryFolders').getSupportedFolders()||[]).filter(function(p){return p!==c('MessagingTag').ACTION_ARCHIVED;}),j='unread_thread_hash',k='unseen_thread_list',l=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,m=c('LogHistory').getInstance('mercury_unread_state');n.getForFBID=function(p){return o.getForFBID(p);};n.get=function(){return o.get();};function n(p){this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c('MercuryServerRequests').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c('MercuryThreadIDMap').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c('MercuryThreadInformer').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c('MercuryThreads').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c('MercuryDispatcher').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new (c('KeyedCallbackManager'))();}.bind(this));this.$MercuryUnreadState6.subscribe('update-unread',this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe('update-thread-ids',function(q,r){this.$MercuryUnreadState13(r);}.bind(this));}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error('unguarded_unread_count_fetch','{}');return 0;}return this.$MercuryUnreadState14(p);};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l;};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);};n.prototype.getIsThreadUnread=function(p,q){var r=q||c('MessagingTag').INBOX,s=this.$MercuryUnreadState15(r);return !!(s&&s[p]);};n.prototype.$MercuryUnreadState12=function(p,q){this.$MercuryUnreadState16(q);var r=q.global_actions||[];for(var s=0;s<r.length;s++){var t=r[s];if(t.action_type==c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryUnreadState17(t.folder,t.timestamp);}};n.prototype.$MercuryUnreadState18=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q));};n.prototype.$MercuryUnreadState19=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p);};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j);};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q){return q.length;}else return this.$MercuryUnreadState9[p];};n.prototype.$MercuryUnreadState16=function(p){var q=void 0;(p.unread_thread_fbids||[]).forEach(function(r){q=r.folder;if(!this.$MercuryUnreadState20(q))return;var s=r.thread_fbids||[];s=s.concat(r.other_user_fbids||[]);var t=this.$MercuryUnreadState21(s);this.$MercuryUnreadState18(q,c('createObjectFrom')(t,true));if(t.length>l)this.$MercuryUnreadState10[q]=true;this.$MercuryUnreadState4.updatedUnreadState();}.bind(this));(p.message_counts||[]).forEach(function(r){if(r.unread_count===undefined)return;q=r.folder;if(r.unread_count>l){this.$MercuryUnreadState10[q]=true;this.$MercuryUnreadState18(q,{});this.$MercuryUnreadState4.updatedUnreadState();}else{this.$MercuryUnreadState9[q]=r.unread_count;if(this.$MercuryUnreadState9[q]===0)this.$MercuryUnreadState18(q,{});this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));(p.actions||[]).forEach(function(r){var s=c('MercuryActionType'),t=r.other_user_fbid?r.other_user_fbid:r.thread_fbid,u=r.thread_id?r.thread_id:t;if(r.action_type==s.DELETE_THREAD){i.forEach(function(w){this.$MercuryUnreadState22(w,u);}.bind(this));}else if(r.action_type==s.CHANGE_ARCHIVED_STATUS||r.action_type==s.CHANGE_FOLDER){var v=this.$MercuryUnreadState5.getThreadMetaNow(r.thread_id);!!v||h(0);q=c('MercuryFolders').getFromMeta(v);if(this.$MercuryUnreadState20(q)&&v.unread_count>0)this.$MercuryUnreadState23(q,u);i.forEach(function(w){if(w!=q)this.$MercuryUnreadState22(w,u);}.bind(this));}else{q=this.$MercuryUnreadState24(r);if(!this.$MercuryUnreadState20(q))return;if(r.action_type==s.CHANGE_READ_STATUS){if(r.mark_as_read){this.$MercuryUnreadState22(q,u,r.timestamp);}else this.$MercuryUnreadState23(q,u,r.timestamp);}else if(r.action_type==s.USER_GENERATED_MESSAGE||r.action_type==s.LOG_MESSAGE)if(r.is_unread)this.$MercuryUnreadState23(q,u,r.timestamp);}}.bind(this));};n.prototype.$MercuryUnreadState23=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState19(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState18(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState19(p,function(s){if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r;}var u=s[q];if(r&&typeof u=='number'&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState18(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState17=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState18(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState();};n.prototype.$MercuryUnreadState21=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3);};n.prototype.$MercuryUnreadState13=function(p){i.forEach(function(q){var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s];}}this.$MercuryUnreadState18(q,r);}.bind(this));};n.prototype.$MercuryUnreadState24=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c('MercuryFolders').getFromMeta(q):p.folder?p.folder:'';};n.prototype.$MercuryUnreadState20=function(p){return c('arrayContains')(i,p);};var o=new (c('MercurySingletonProvider'))(n);f.exports=n;}),null);
__d('MercurySyncConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={ARBITER_EVENT_INVALID_STATE:'SYNC:INVALID_STATE',ARBITER_EVENT_INVALID_STATE_RETRY:'SYNC:INVALID_STATE_RETRY',ARBITER_EVENT_INVALID_STATE_RECOVER:'SYNC:INVALID_STATE_RECOVER'};f.exports=h;}),null);
__d("ScriptPathState",["Arbiter"],(function a(b,c,d,e,f,g){var h,i,j,k,l=100,m={setIsUIPageletRequest:function n(o){j=o;},setUserURISampleRate:function n(o){k=o;},reset:function n(){h=null;i=false;j=false;},_shouldUpdateScriptPath:function n(){return i&&!j;},_shouldSendURI:function n(){return Math.random()<k;},getParams:function n(){var o={};if(m._shouldUpdateScriptPath()){if(m._shouldSendURI()&&h!==null)o.user_uri=h.substring(0,l);}else o.no_script_path=1;return o;}};c("Arbiter").subscribe("pre_page_transition",function(n,o){i=true;h=o.to.getUnqualifiedURI().toString();});f.exports=b.ScriptPathState=m;}),null);
__d('AjaxPipeRequest',['Arbiter','AsyncRequest','BigPipe','CSS','DOM','Env','PageEvents','PageletSet','ScriptPathState','URI','containsNode','ge','goOrReplace','performance','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){var h,i=0;function j(m,n){var o=c('ge')(m);if(!o)return;if(!n)o.style.minHeight='100px';var p=c('PageletSet').getPageletIDs();for(var q=0;q<p.length;q++){var r=p[q];if(c('containsNode')(o,c('ge')(r)))c('PageletSet').removePagelet(r);}c('Arbiter').inform(c('PageEvents').AJAXPIPE_ONBEFORECLEARCANVAS);c('DOM').empty(o);c('Arbiter').inform('pagelet/destroy',{id:null,root:o});}function k(m,n){var o=c('ge')(m);if(o&&!n)o.style.minHeight='100px';}function l(m,n){'use strict';this._uri=m;this._query_data=n;this._request=new (c('AsyncRequest'))();this._request.disableArtilleryTracing();this._canvas_id=null;this._allow_cross_page_transition=true;this._arbiter=new (c('Arbiter'))();this._requestID=i++;}l.prototype.setCanvasId=function(m){'use strict';this._canvas_id=m;return this;};l.prototype.setURI=function(m){'use strict';this._uri=m;return this;};l.prototype.setData=function(m){'use strict';this._query_data=m;return this;};l.prototype.getData=function(m){'use strict';return this._query_data;};l.prototype.setAllowCrossPageTransition=function(m){'use strict';this._allow_cross_page_transition=m;return this;};l.prototype.setAppend=function(m){'use strict';this._append=m;return this;};l.prototype.send=function(){'use strict';this._arbiter.inform(c('PageEvents').AJAXPIPE_SEND,{rid:this._requestID,quickling:!!this._isQuickling,ts:c('performanceAbsoluteNow')()},c('Arbiter').BEHAVIOR_PERSISTENT);var m={ajaxpipe:1,ajaxpipe_token:c('Env').ajaxpipe_token};Object.assign(m,c('ScriptPathState').getParams());c('ScriptPathState').reset();this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(Object.assign(m,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._automatic){this._relevantRequest=h;}else h=this._request;if(this._isQuickling){var n=c('performance').clearResourceTimings||c('performance').webkitClearResourceTimings;if(n)n.call(c('performance'));}this._request.send();return this;};l.prototype._preBootloadFirstResponse=function(m){'use strict';return false;};l.prototype._fireDomContentCallback=function(){'use strict';this._arbiter.inform(c('PageEvents').AJAXPIPE_DOMREADY,true,c('Arbiter').BEHAVIOR_STATE);};l.prototype._fireOnloadCallback=function(){'use strict';if(window.console&&console.timeStamp)console.timeStamp('perf_trace {"name": "e2e",'+' "parent": "PageEvents.AJAXPIPE_ONLOAD"}');this._arbiter.inform(c('PageEvents').AJAXPIPE_ONLOAD,{lid:this.pipe.lid,rid:this._requestID,ts:c('performanceAbsoluteNow')()},c('Arbiter').BEHAVIOR_STATE);};l.prototype._isRelevant=function(m){'use strict';return this._request==h||this._automatic&&this._relevantRequest==h||this._jsNonBlock||h&&h._allowIrrelevantRequests;};l.prototype._preBootloadHandler=function(m){'use strict';var n=m.getPayload();if(!n||n.redirect||!this._isRelevant(m))return false;var o=false;if(m.is_first){!this._append&&!this._displayCallback&&j(this._canvas_id,this._constHeight);o=this._preBootloadFirstResponse(m);this.pipe=new (c('BigPipe'))({__sf:m.__sf,arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,rid:this._requestID,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:c('PageEvents').AJAXPIPE_DOMREADY,onloadEvt:c('PageEvents').AJAXPIPE_ONLOAD,jsNonBlock:this._jsNonBlock,automatic:this._automatic,displayCallback:this._displayCallback,allowIrrelevantRequests:this._allowIrrelevantRequests});}return o;};l.prototype._redirect=function(m){'use strict';if(m.redirect){if(m.force||!this.isPageActive(m.redirect)){var n=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());c('goOrReplace')(window.location,new (c('URI'))(m.redirect).removeQueryData(n),true);}else{var o=b.PageTransitions;o.go(m.redirect,true);}return true;}else return false;};l.prototype.isPageActive=function(m){'use strict';return true;};l.prototype.getSanitizedParameters=function(){'use strict';return [];};l.prototype._versionCheck=function(m){'use strict';return true;};l.prototype._onInitialResponse=function(m){'use strict';var n=m.getPayload();if(!this._isRelevant(m))return false;if(!n)return true;if(this._redirect(n)||!this._versionCheck(n))return false;return true;};l.prototype._processFirstResponse=function(m){'use strict';var n=m.getPayload();if(c('ge')(this._canvas_id)&&n.canvas_class!=null)c('CSS').setClass(this._canvas_id,n.canvas_class);};l.prototype.setFirstResponseCallback=function(m){'use strict';this._firstResponseCallback=m;return this;};l.prototype.setFirstResponseHandler=function(m){'use strict';this._processFirstResponse=m;return this;};l.prototype._onResponse=function(m){'use strict';var n=m.payload;if(!this._isRelevant(m))return c('AsyncRequest').suppressOnloadToken;if(m.is_first){this._processFirstResponse(m);this._firstResponseCallback&&this._firstResponseCallback();n.provides=n.provides||[];n.provides.push('uipage_onload');}if(n){if('content' in n.content&&this._canvas_id!==null){if(this._append)n.append=this._canvas_id;var o=n.content.content;delete n.content.content;n.content[this._canvas_id]=o;}if(n.secondFlushPayload){this.pipe.setSecondFlushPayload(n.secondFlushPayload);}else this.pipe.onPageletArrive(n);}if(m.is_last)k(this._canvas_id,this._constHeight);return c('AsyncRequest').suppressOnloadToken;};l.prototype.setNectarModuleDataSafe=function(m){'use strict';this._request.setNectarModuleDataSafe(m);return this;};l.prototype.setFinallyHandler=function(m){'use strict';this._request.setFinallyHandler(m);return this;};l.prototype.setErrorHandler=function(m){'use strict';this._request.setErrorHandler(m);return this;};l.prototype.setTransportErrorHandler=function(m){'use strict';this._request.setTransportErrorHandler(m);return this;};l.prototype.abort=function(){'use strict';this._request.abort();if(h==this._request)h=null;this._request=null;return this;};l.prototype.setJSNonBlock=function(m){'use strict';this._jsNonBlock=m;return this;};l.prototype.setAutomatic=function(m){'use strict';this._automatic=m;return this;};l.prototype.setDisplayCallback=function(m){'use strict';this._displayCallback=m;return this;};l.prototype.setConstHeight=function(m){'use strict';this._constHeight=m;return this;};l.prototype.setAllowIrrelevantRequests=function(m){'use strict';this._allowIrrelevantRequests=m;return this;};l.prototype.getAsyncRequest=function(){'use strict';return this._request;};l.getCurrentRequest=function(){'use strict';return h;};l.setCurrentRequest=function(m){'use strict';h=m;};f.exports=l;}),null);
__d('P2PActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={CREDIT_CARDS_UPDATED:'credit_cards_updated',CREDIT_CARDS_UPDATED_ERROR:'credit_cards_updated_error',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_SAVING:'credit_card_saving',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_ADDED_ERROR_CLEARED:'credit_card_added_error_cleared',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',PAYMENT_METHODS_UPDATED:'payment_methods_updated',PAYMENT_METHODS_UPDATED_ERROR:'payment_methods_updated_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',FRIENDS_LIST_UPDATED:'friends_list_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error',PLATFORM_CONTEXT_ADDED:'platform_context_added',PLATFORM_CONTEXT_ADDED_ERROR:'platform_context_added_error',PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:'platform_context_save_errors_cleared',PLATFORM_CONTEXT_BANNER_DISMISSED:'platform_context_banner_dismissed',PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:'platform_context_product_item_sold',PLATFORM_CONTEXT_CHANGED:'platform_context_changed',EXTENSIVE_TRANSFER_DETAILS_UPDATED:'extensive_transfer_details_updated',ADDRESS_SAVING:'address_saving',ADDRESSES_UPDATED:'addresses_updated',ADDRESS_ADDED:'address_added',ADDRESS_ADDED_ERROR:'address_added_error',ADDRESS_ADDED_ERROR_CLEARED:'address_added_error_cleared',CHECKOUT_CART_INITIATED:'checkout_cart_initiated',CHECKOUT_CART_CREATED:'checkout_cart_created',CHECKOUT_SHIPPING_OPTION_SELECTED:'checkout_shipping_option_selected',CHECKOUT_ADDRESS_SELECTED:'checkout_address_selected',CHECKOUT_CREDIT_CARD_SELECTED:'checkout_credit_card_selected',CHECKOUT_ADDRESS_FORM_TOGGLED:'checkout_address_form_toggled',CHECKOUT_CREDIT_CARD_FORM_TOGGLED:'checkout_credit_card_form_toggled',CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:'checkout_address_options_toggled',CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:'checkout_credit_card_edit_options_toggled',CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:'checkout_payment_edit_options_toggled',CHECKOUT_PAYMENT_METHOD_SELECTED:'checkout_payment_method_selected',CHECKOUT_PAYMENT_METHOD_CONFIGURED:'checkout_payment_method_configured',CHECKOUT_PAYMENT_METHOD_CONFIRMED:'checkout_payment_method_confirmed',CHECKOUT_ADDRESS_FORM_VALIDATED:'checkout_address_form_validated',CHECKOUT_CREDIT_CARD_FORM_VALIDATED:'checkout_credit_card_form_validated',CHECKOUT_EDIT_COMPLETED:'checkout_completed',CHECKOUT_PROCESSING:'checkout_processing',CHECKOUT_BUYER_PROFILE_UPDATED:'checkout_buyer_profile_updated',CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:'checkout_manual_payment_receipt_updated',PAYMENT_REQUEST_INITIATED:'payment_request_initiated',PAYMENT_REQUEST_INITIATED_COMPLETE:'payment_request_initiated_completed',PAYMENT_REQUEST_CREATED:'payment_request_created',PAYMENT_REQUEST_CREATED_ERROR:'payment_request_created_error',PAYMENT_REQUEST_UPDATED:'payment_request_updated',PAYMENT_REQUEST_DECLINE_INITIATED:'payment_request_decline_initiated',PAYMENT_REQUEST_DECLINED:'payment_request_declined',PAYMENT_REQUEST_DECLINE_ERROR:'payment_request_decline_error',PAYMENT_REQUESTS_FETCHED:'payment_requests_fetched',PAYMENT_REQUEST_CANCEL_INITIATED:'payment_request_cancel_initiated',PAYMENT_REQUEST_CANCELED:'payment_request_canceled',PAYMENT_REQUEST_CANCEL_ERROR:'payment_request_cancel_error'};f.exports=h;}),null);
__d('P2PDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:false});}),null);
__d("UIPageletContentCache",[],(function a(b,c,d,e,f,g){var h={cache:{},getContent:function i(j){if(j in this.cache)return this.cache[j];return null;},setContent:function i(j,k){this.cache[j]=k;}};f.exports=h;}),null);
__d('UIPagelet',['ActorURI','AjaxPipeRequest','AsyncRequest','DOM','HTML','ScriptPathState','UIPageletContentCache','URI','emptyFunction','ge','isElementNode'],(function a(b,c,d,e,f,g){function h(i,j,k){'use strict';var l=i&&c('isElementNode')(i)?i.id:i;this._id=l||null;this._element=c('ge')(i||c('DOM').create('div'));this._src=j||null;this._context_data=k||{};this._data={};this._handler=c('emptyFunction');this._request=null;this._use_ajaxpipe=false;this._use_post_request=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;this._cache_content=false;this._content_cache_key='';}h.prototype.getElement=function(){'use strict';return this._element;};h.prototype.setHandler=function(i){'use strict';this._handler=i;return this;};h.prototype.go=function(i,j){'use strict';if(arguments.length>=2||typeof i=='string'){this._src=i;this._data=j||{};}else if(arguments.length==1)this._data=i;this.refresh();return this;};h.prototype.setAllowCrossPageTransition=function(i){'use strict';this._allow_cross_page_transition=i;return this;};h.prototype.setBundleOption=function(i){'use strict';this._is_bundle=i;return this;};h.prototype.setErrorHandler=function(i){'use strict';this._errorHandler=i;return this;};h.prototype.setTransportErrorHandler=function(i){'use strict';this.transportErrorHandler=i;return this;};h.prototype.refresh=function(){'use strict';if(this._use_ajaxpipe){c('ScriptPathState').setIsUIPageletRequest(true);this._request=new (c('AjaxPipeRequest'))();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setDisplayCallback(this._displayCallback).setFinallyHandler(this._finallyHandler).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);}else{if(this._cache_content){var i=c('UIPageletContentCache').getContent(this._content_cache_key);if(i!==null){this.handleContent(i);return this;}}var j=function(n){this._request=null;var o=c('HTML')(n.getPayload());this.handleContent(o);if(this._cache_content)c('UIPageletContentCache').setContent(this._content_cache_key,o);}.bind(this),k=this._displayCallback,l=this._finallyHandler;this._request=new (c('AsyncRequest'))().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(n){if(k){k(j.bind(null,n));}else j(n);l&&l();});if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);if(this._use_post_request)this._request.setMethod('POST');}var m=babelHelpers['extends']({},this._context_data,this._data);if(this._actorID)m[c('ActorURI').PARAMETER_ACTOR]=this._actorID;this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(m)}).send();return this;};h.prototype.handleContent=function(i){'use strict';if(this._append){c('DOM').appendContent(this._element,i);}else c('DOM').setContent(this._element,i);this._handler();};h.prototype.cancel=function(){'use strict';if(this._request)this._request.abort();};h.prototype.setUseAjaxPipe=function(i){'use strict';this._use_ajaxpipe=!!i;return this;};h.prototype.setUsePostRequest=function(i){'use strict';this._use_post_request=!!i;return this;};h.prototype.setAppend=function(i){'use strict';this._append=!!i;return this;};h.prototype.setJSNonBlock=function(i){'use strict';this._jsNonblock=!!i;return this;};h.prototype.setAutomatic=function(i){'use strict';this._automatic=!!i;return this;};h.prototype.setDisplayCallback=function(i){'use strict';this._displayCallback=i;return this;};h.prototype.setConstHeight=function(i){'use strict';this._constHeight=!!i;return this;};h.prototype.setFinallyHandler=function(i){'use strict';this._finallyHandler=i;return this;};h.prototype.setAllowIrrelevantRequests=function(i){'use strict';this._allowIrrelevantRequests=i;return this;};h.prototype.setActorID=function(i){'use strict';this._actorID=i;return this;};h.prototype.setCacheContent=function(i){'use strict';this._cache_content=i;return this;};h.prototype.setContentCacheKey=function(i){'use strict';this._content_cache_key=i;return this;};h.appendToInline=function(i,j){'use strict';var k=c('ge')(i),l=c('ge')(j);if(k&&l){while(l.firstChild)c('DOM').appendContent(k,l.firstChild);c('DOM').remove(l);}};h.loadFromEndpoint=function(i,j,k,l){'use strict';l=l||{};var m='/ajax/pagelet/generic.php/'+i;if(l.intern)m='/intern'+m;var n=new (c('URI'))(m.replace(/\/+/g,'/'));if(l.subdomain)n.setSubdomain(l.subdomain);var o=false,p='';if(l.contentCacheKey){o=true;p=i+','+String(l.contentCacheKey);}var q=new h(j,n,k).setUseAjaxPipe(l.usePipe).setBundleOption(l.bundle!==false).setAppend(l.append).setJSNonBlock(l.jsNonblock).setAutomatic(l.automatic).setDisplayCallback(l.displayCallback).setConstHeight(l.constHeight).setAllowCrossPageTransition(l.crossPage).setFinallyHandler(l.finallyHandler||c('emptyFunction')).setErrorHandler(l.errorHandler).setTransportErrorHandler(l.transportErrorHandler).setAllowIrrelevantRequests(l.allowIrrelevantRequests).setActorID(l.actorID).setCacheContent(o).setContentCacheKey(p).setUsePostRequest(l.usePostRequest);l.handler&&q.setHandler(l.handler);q.go();return q;};h.loadFromEndpointBatched=function(i,j,k){'use strict';var l=i.slice(0,k),m=i.slice(k);if(m.length>0){var n=l[l.length-1],o=c('emptyFunction');if(n.options&&n.options.finallyHandler)o=n.options.finallyHandler;n.options=babelHelpers['extends']({},n.options,{finallyHandler:function p(){o();window.setTimeout(function(){h.loadFromEndpointBatched(m,j,k);},1);}});}l.forEach(function(p){h.loadFromEndpoint(p.controller,p.target_element,p.data,babelHelpers['extends']({},p.options,j,{bundle:true}));});};f.exports=h;}),null);
__d('isInFocusMode',['WorkFocusModeController'],(function a(b,c,d,e,f,g){var h=c('WorkFocusModeController').WorkFocusMode,i=function j(k){return !!(h&&h.currentViewerInFocusMode(k));};f.exports=i;}),null);
__d('StoreBasedStateMixinHelper',['invariant','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.$StoreBasedStateMixinHelper1=j;this.$StoreBasedStateMixinHelper2=new (c('SubscriptionsHandler'))();}i.prototype.subscribeCallback=function(j){var k=this.$StoreBasedStateMixinHelper1.map(function(l){if(l.hasChanged&&l.getDispatchToken&&l.addListener){return l.addListener(j);}else if(l.subscribe){return l.subscribe('change',j);}else if(l.addListener){return l.addListener('change',j);}else h(0);});if(this.$StoreBasedStateMixinHelper1.length>0)this.$StoreBasedStateMixinHelper2.addSubscriptions.apply(this.$StoreBasedStateMixinHelper2,k);};i.prototype.release=function(){this.$StoreBasedStateMixinHelper2.release();};f.exports=i;}),null);